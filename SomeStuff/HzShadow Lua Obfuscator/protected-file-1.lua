--[[This file is protected by HzShadow.Discord server: https://dc.gg/shwxteam--]]local b='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';function dec(data)data=string.gsub(data,'[^'..b..'=]','');return(data:gsub('.',function(x)if(x=='=')then return''end;local r,f='',(b:find(x)-1);for i=6,1,-1 do r=r..(f%2^i-f%2^(i-1)>0 and'1'or'0')end;return r;end):gsub('%d%d%d?%d?%d?%d?%d?%d?',function(x)if(#x~=8)then return''end;local c=0;for i=1,8 do c=c+(x:sub(i,i)=='1'and 2^(8-i)or 0)end;return string.char(c)end))end;loadstring(dec('X0hhd2sgPSAib2hoYWh0dWh0aHR0b3V0dHB3dXR0dWF1bmJvdHdvIgoKZm9yIGksIHYgaW4gcGFpcnMoZ2FtZS5Db3JlR3VpOkdldENoaWxkcmVuKCkpIGRvCglpZiB2Lk5hbWUgPT0gIkhhd2tNaW5pIiBvciB2Lk5hbWUgPT0gIkhhd2siIG9yIHYuTmFtZSA9PSAiR2FtZU5vdGlmaWNhdGlvbiIgb3Igdi5OYW1lID09ICJIYXdrTm90aWZpY2F0aW9uIiBvciB2Lk5hbWUgPT0gIkhhd2tLZXlTeXN0ZW0iIG9yIHYuTmFtZSA9PSAiSGF3a0xvYWRlciIgb3Igdi5OYW1lID09ICJJbnRybyIgb3Igdi5OYW1lID09ICJMb2FkIiBvciB2Lk5hbWUgPT0gIkhhd2tBZG1pbiIgb3Igdi5OYW1lID09ICJhbWsiIHRoZW4KCQl2OkRlc3Ryb3koKQoJZW5kCmVuZAoKbG9jYWwgSGF3a01pbmkgPSBJbnN0YW5jZS5uZXcoIlNjcmVlbkd1aSIpCmxvY2FsIE1haW4gPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKbG9jYWwgVUlDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKbG9jYWwgTG9nbyA9IEluc3RhbmNlLm5ldygiSW1hZ2VMYWJlbCIpCmxvY2FsIFVJQ29ybmVyXzIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKbG9jYWwgR2xvdyA9IEluc3RhbmNlLm5ldygiSW1hZ2VMYWJlbCIpCmxvY2FsIEdsb3dfMiA9IEluc3RhbmNlLm5ldygiSW1hZ2VMYWJlbCIpCmxvY2FsIFRleHQgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCmxvY2FsIFVJQ29ybmVyXzMgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKbG9jYWwgVGV4dF8yID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQpsb2NhbCBVSUNvcm5lcl80ID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpCmxvY2FsIFRleHRfMyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKbG9jYWwgVUlDb3JuZXJfNSA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKQpsb2NhbCBCYXIgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKbG9jYWwgVUlDb3JuZXJfNiA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKQpsb2NhbCBMb2FkZXJUZXh0cyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKCkhhd2tNaW5pLk5hbWUgPSAiSGF3a01pbmkiCkhhd2tNaW5pLlBhcmVudCA9IGdhbWUuQ29yZUd1aQpIYXdrTWluaS5aSW5kZXhCZWhhdmlvciA9IEVudW0uWkluZGV4QmVoYXZpb3IuU2libGluZwpIYXdrTWluaS5SZXNldE9uU3Bhd24gPSBmYWxzZQoKTWFpbi5OYW1lID0gIk1haW4iCk1haW4uUGFyZW50ID0gSGF3a01pbmkKTWFpbi5BY3RpdmUgPSB0cnVlCk1haW4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDM1LCAzNSwgMzUpCk1haW4uQm9yZGVyQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMzUsIDM1LCAzNSkKTWFpbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIC0xNTAsIDAuNSwgLTg0KQpNYWluLlNpemUgPSBVRGltMi5uZXcoMCwgMzAxLCAwLCAxNjkpCgpVSUNvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA1KQpVSUNvcm5lci5QYXJlbnQgPSBNYWluCgpMb2dvLk5hbWUgPSAiTG9nbyIKTG9nby5QYXJlbnQgPSBNYWluCkxvZ28uQWN0aXZlID0gdHJ1ZQpMb2dvLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzMSwgMzEsIDMxKQpMb2dvLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLjAwMApMb2dvLkJvcmRlckNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDMxLCAzMSwgMzEpCkxvZ28uUG9zaXRpb24gPSBVRGltMi5uZXcoMC4zODU5MTgzNzksIDAsIDAuMDQ1Njc1NTE2MSwgMCkKTG9nby5TaXplID0gVURpbTIubmV3KDAsIDY2LCAwLCA2MikKTG9nby5JbWFnZSA9ICJodHRwOi8vd3d3LnJvYmxveC5jb20vYXNzZXQvP2lkPTkzNTY5NzYzODQ5NTQ4IgoKVUlDb3JuZXJfMi5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA1KQpVSUNvcm5lcl8yLlBhcmVudCA9IExvZ28KCkdsb3cuTmFtZSA9ICJHbG93IgpHbG93LlBhcmVudCA9IE1haW4KR2xvdy5BY3RpdmUgPSB0cnVlCkdsb3cuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCkdsb3cuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEuMDAwCkdsb3cuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgLTE1LCAwLCAtMTUpCkdsb3cuU2l6ZSA9IFVEaW0yLm5ldygxLCAzMCwgMSwgMzApCkdsb3cuWkluZGV4ID0gMApHbG93LkltYWdlID0gInJieGFzc2V0aWQ6Ly81MDI4ODU3MDg0IgpHbG93LkltYWdlQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMCkKR2xvdy5TY2FsZVR5cGUgPSBFbnVtLlNjYWxlVHlwZS5TbGljZQpHbG93LlNsaWNlQ2VudGVyID0gUmVjdC5uZXcoMjQsIDI0LCAyNzYsIDI3NikKCkdsb3dfMi5OYW1lID0gIkdsb3ciCkdsb3dfMi5QYXJlbnQgPSBNYWluCkdsb3dfMi5BY3RpdmUgPSB0cnVlCkdsb3dfMi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKR2xvd18yLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLjAwMApHbG93XzIuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgLTE1LCAwLCAtMTUpCkdsb3dfMi5TaXplID0gVURpbTIubmV3KDEsIDMwLCAxLCAzMCkKR2xvd18yLlpJbmRleCA9IDAKR2xvd18yLkltYWdlID0gInJieGFzc2V0aWQ6Ly81MDI4ODU3MDg0IgpHbG93XzIuSW1hZ2VDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKQpHbG93XzIuU2NhbGVUeXBlID0gRW51bS5TY2FsZVR5cGUuU2xpY2UKR2xvd18yLlNsaWNlQ2VudGVyID0gUmVjdC5uZXcoMjQsIDI0LCAyNzYsIDI3NikKClRleHQuTmFtZSA9ICJUZXh0IgpUZXh0LlBhcmVudCA9IE1haW4KVGV4dC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMzUsIDM1LCAzNSkKVGV4dC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMS4wMDAKVGV4dC5Cb3JkZXJDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzNSwgMzUsIDM1KQpUZXh0LlBvc2l0aW9uID0gVURpbTIubmV3KDAuMTYyNzkwNzAxLCAwLCAwLjQwODI4NDA2OCwgMCkKVGV4dC5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgMTYpClRleHQuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkClRleHQuVGV4dCA9ICJXZWxjb21lIHRvIFJpc2UiClRleHQuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpClRleHQuVGV4dFNpemUgPSAxNC4wMDAKVGV4dC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuQ2VudGVyCgpVSUNvcm5lcl8zLlBhcmVudCA9IFRleHQKClRleHRfMi5OYW1lID0gIlRleHQiClRleHRfMi5QYXJlbnQgPSBNYWluClRleHRfMi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMzUsIDM1LCAzNSkKVGV4dF8yLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLjAwMApUZXh0XzIuQm9yZGVyQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMzUsIDM1LCAzNSkKVGV4dF8yLlBvc2l0aW9uID0gVURpbTIubmV3KDAuMTYyNzkwNzAxLCAwLCAwLjUwNDkzMDk3MywgMCkKVGV4dF8yLlNpemUgPSBVRGltMi5uZXcoMCwgMjAwLCAwLCAxNikKVGV4dF8yLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZApUZXh0XzIuVGV4dCA9ICJQb3dlcmVkIEJ5IEhhd2tIdWIiClRleHRfMi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKVGV4dF8yLlRleHRTaXplID0gMTQuMDAwClRleHRfMi5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuQ2VudGVyCgpVSUNvcm5lcl80LlBhcmVudCA9IFRleHRfMgoKVGV4dF8zLk5hbWUgPSAiVGV4dCIKVGV4dF8zLlBhcmVudCA9IE1haW4KVGV4dF8zLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzNSwgMzUsIDM1KQpUZXh0XzMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEuMDAwClRleHRfMy5Cb3JkZXJDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzNSwgMzUsIDM1KQpUZXh0XzMuUG9zaXRpb24gPSBVRGltMi5uZXcoMC4xNjI3OTA3MDEsIDAsIDAuNjAxNTc3ODc4LCAwKQpUZXh0XzMuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDE2KQpUZXh0XzMuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkClRleHRfMy5UZXh0ID0gImh0dHBzOi8vZGMuZ2cvc2h3eHRlYW0iClRleHRfMy5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKVGV4dF8zLlRleHRTaXplID0gMTQuMDAwClRleHRfMy5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuQ2VudGVyCgpVSUNvcm5lcl81LlBhcmVudCA9IFRleHRfMwoKQmFyLk5hbWUgPSAiQmFyIgpCYXIuUGFyZW50ID0gTWFpbgpCYXIuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDgzLCA4MywgODMpCkJhci5Cb3JkZXJDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4MywgODMsIDgzKQpCYXIuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMC45NTI2NjI3MDYsIDApCkJhci5TaXplID0gVURpbTIubmV3KDAsIDgsIDAsIDgpCkJhci5WaXNpYmxlID0gZmFsc2UKClVJQ29ybmVyXzYuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNSkKVUlDb3JuZXJfNi5QYXJlbnQgPSBCYXIKCkxvYWRlclRleHRzLk5hbWUgPSAiTG9hZGVyVGV4dHMiCkxvYWRlclRleHRzLlBhcmVudCA9IE1haW4KTG9hZGVyVGV4dHMuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDM1LCAzNSwgMzUpCkxvYWRlclRleHRzLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLjAwMApMb2FkZXJUZXh0cy5Cb3JkZXJDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzNSwgMzUsIDM1KQpMb2FkZXJUZXh0cy5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLjg0MDIzNjY2NCwgMCkKTG9hZGVyVGV4dHMuU2l6ZSA9IFVEaW0yLm5ldygwLCAzMDEsIDAsIDE2KQpMb2FkZXJUZXh0cy5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKTG9hZGVyVGV4dHMuVGV4dCA9ICIiCkxvYWRlclRleHRzLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQpMb2FkZXJUZXh0cy5UZXh0U2l6ZSA9IDE0LjAwMAoKQmFyLlZpc2libGUgPSB0cnVlCkJhcjpUd2VlblNpemUoVURpbTIubmV3KDAsIDY0LDAsIDgpKQpMb2FkZXJUZXh0cy5UZXh0ID0gIldlbGNvbWUgdG8gUmlzZSwgIiAuLiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuTmFtZQp3YWl0KDEuNSkKQmFyOlR3ZWVuU2l6ZShVRGltMi5uZXcoMCwgMTQ3LDAsIDgpKQpMb2FkZXJUZXh0cy5UZXh0ID0gIkxvYWRpbmcgU2NyaXB0cy4uLiIKd2FpdCgxLjUpCkJhcjpUd2VlblNpemUoVURpbTIubmV3KDAsIDE4MiwwLCA4KSkKTG9hZGVyVGV4dHMuVGV4dCA9ICJVSXMgQXJlIEJlaW5nIFZhbGlkYXRlZC4uLiIKd2FpdCgxLjUpCkJhcjpUd2VlblNpemUoVURpbTIubmV3KDAsIDI0MCwwLCA4KSkKTG9hZGVyVGV4dHMuVGV4dCA9ICJDaGVja2luZyBBZG1pbi4uLiIKd2FpdCgxLjUpCkJhcjpUd2VlblNpemUoVURpbTIubmV3KDAsIDI4MiwwLCA4KSkKTG9hZGVyVGV4dHMuVGV4dCA9ICJEb25lISIKd2FpdCgxLjUpCkJhcjpUd2VlblNpemUoVURpbTIubmV3KDAsIDMwMSwwLCA4KSkKTG9hZGVyVGV4dHMuVGV4dCA9ICJEb250IEZvcmdldCBUbyBKb2luIE91ciBEaXNjb3JkIFNlcnZlciEiCndhaXQoMS41KQoKZm9yIGksIHYgaW4gcGFpcnMoZ2FtZS5Db3JlR3VpOkdldENoaWxkcmVuKCkpIGRvCglpZiB2Lk5hbWUgPT0gIkhhd2tNaW5pIiBvciB2Lk5hbWUgPT0gIkhhd2siIG9yIHYuTmFtZSA9PSAiR2FtZU5vdGlmaWNhdGlvbiIgb3Igdi5OYW1lID09ICJIYXdrTm90aWZpY2F0aW9uIiBvciB2Lk5hbWUgPT0gIkhhd2tLZXlTeXN0ZW0iIG9yIHYuTmFtZSA9PSAiSGF3a0xvYWRlciIgb3Igdi5OYW1lID09ICJJbnRybyIgb3Igdi5OYW1lID09ICJMb2FkIiBvciB2Lk5hbWUgPT0gIkhhd2tBZG1pbiIgb3Igdi5OYW1lID09ICJhbWsiIHRoZW4KCQl2OkRlc3Ryb3koKQoJZW5kCmVuZAoKbG9jYWwgSGF3ayA9IGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCJodHRwczovL2dpc3QuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1NoYWRvd0JleTAxLzQ3MDFjOTQ0NDU1ODZkYmFkMTc2YTcyNmVlMjZmNGI0L3Jhdy81OTQxNDk5MGNlYmM4OWFlN2E2ZDQxYTVjZmFhZWI3NTJiZDg5ODFjL0hhd2tMaWIubHVhIiwgdHJ1ZSkpKCkKCkhhd2tMaWIgPSB7CglFbGVtZW50cyA9IHsKCQlXaWRlTWVudSA9IHsKCQkJTWFpblBvc2l0aW9uID0gVURpbTIubmV3KDAuNTE3Njk2MjYxLCAtMjk2LCAwLjQwMTQ5NDU5MiwgLTE2NCksCgkJCU1haW5TaXplID0gVURpbTIubmV3KDAsIDU5MiwgMCwgNDUxKSwKCQkJVGl0bGVCYXJTaXplID0gVURpbTIubmV3KDAsIDU5MiwgMCwgNDQpLAoJCQlTZWN0aW9uU2l6ZSA9IFVEaW0yLm5ldygwLCAzOTEsIDAsIDM2KSwKCQkJQ2xvc2VQb3NpdGlvbiA9IFVEaW0yLm5ldygwLjk0NDI1Njc4MywgMCwgMC4zNSwgMCksCgkJCU1pbmltaXplUG9zaXRpb24gPSBVRGltMi5uZXcoMC44OTE4OTE4OTcsIDAsIDAuMzUsIDApLAoJCQlUaXRsZVBvc2l0aW9uID0gVURpbTIubmV3KDAuMDMyLCAwLCAwLjEwLCAwKSwKCQkJVGFiUG9zaXRpb24gPSBVRGltMi5uZXcoMC4wMTY4OTE4OTExLCAwLCAwLjE0MCwgMCksCgkJCVRhYnNTaXplID0gVURpbTIubmV3KDAsIDE2MiwgMCwgMzg0KSwKCQkJUGFnZXNQb3NpdGlvbiA9IFVEaW0yLm5ldygwLjMxNzU2NzU1NywgMCwgMC4xMTY0MDc4NDksIDApLAoJCQlQYWdlc1NpemUgPSBVRGltMi5uZXcoMCwgNDA0LCAwLCAzOTgpLAoJCQlQYWdlUG9zaXRpb24gPSBVRGltMi5uZXcoLTAuMDE0ODUxNDg1NCwgMCwgMC4wMzg3MzI2NTkxLCAwKSwKCQkJUGFnZVNpemUgPSBVRGltMi5uZXcoMCwgNDAzLCAwLCAzNzcpLAoJCQlQYWdlVGl0bGVTaXplID0gVURpbTIubmV3KDAsIDM5MSwgMCwgMzYpCgkJfQoJfSwKCglUaGVtZXMgPSB7CglJRGFyayA9IHsKCQkJTWFpbiA9IENvbG9yMy5mcm9tUkdCKDE4LCAxOCwgMTgpLAoJCQlTaGFkb3cgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApLAoJCQlUaXRsZUJhciA9IENvbG9yMy5mcm9tUkdCKDE4LCAxOCwgMTgpLAoJCQlUYWJCZWZvcmUgPSBDb2xvcjMuZnJvbVJHQigzMCwgMzAsIDMwKSwKCQkJVGFiQWZ0ZXIgPSBDb2xvcjMuZnJvbVJHQigzNCwgMzQsIDM0KSwKCQkJVGl0bGVUZXh0Q29sb3IgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KSwKCQkJVGFiVGV4dENvbG9yID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSksCgkJCVRpdGxlTGluZUNvbG9yID0gQ29sb3IzLmZyb21SR0IoMzksIDM5LCAzOSksCgkJCVBhZ2VUaXRsZUNvbG9yID0gQ29sb3IzLmZyb21SR0IoMTk4LCAxOTgsIDE5OCksCgkJCVNlbGVjdGlvbiA9IENvbG9yMy5mcm9tUkdCKDExOCwgMCwgMCksCgkJCUNsb3NlTWluaW1pemUgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KSwKCQkJSXRlbUNvbG9ycyA9IENvbG9yMy5mcm9tUkdCKDI3LCAyNywgMjcpLAoJCQlJdGVtVGl0bGVDb2xvcnMgPSBDb2xvcjMuZnJvbVJHQigyMzEsIDIzMSwgMjMxKSwKCQkJSXRlbVRleHRDb2xvcnMgPSBDb2xvcjMuZnJvbVJHQigxNzEsIDE3MSwgMTcwKSwKCQkJCWl0ZW1UZXh0Qm94S2V5QmluZENvbG9ycyA9IENvbG9yMy5mcm9tUkdCKDI0LCAyNCwgMjQpLAoJCQlJdGVtVGV4dEJveEtleUJpbmRTdHJva2VDb2xvcnMgPSBDb2xvcjMuZnJvbVJHQig2OCwgNjgsIDY4KSwKCQkJCWl0ZW1UZXh0Qm94VGV4dENvbG9yID0gQ29sb3IzLmZyb21SR0IoMTMyLCAxMzIsIDEzMiksCgkJCUl0ZW1LZXlCaW5kVGV4dENvbG9yID0gQ29sb3IzLmZyb21SR0IoMTk5LCAxOTksIDE5OSksCgkJCVRvZ2nbGVUaWNrQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KSwKCQkJQnV0dG9uQ2xpY2tJY29uQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigyMTMsIDIxMywgMjEzKSwKCQkJQnV0dG9uSG92ZXIgPSBDb2xvcjMuZnJvbVJHQig2OCwgNjgsIDY4KSwKCQkJU2xpZGVyQnV0dG9uRnJhbWVDb2xvciA9IENvbG9yMy5mcm9tUkdCKDU1LCAzMCwgMzApLAoJCQlJblNsaWRlckZyYW1lID0gQ29sb3JTZXF1ZW5jZS5uZXcgewoJCQkJQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygwLjAwLCBDb2xvcjMuZnJvbVJHQigxMzUsIDM2LCAzOSkpLAoJCQkJQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygxLjAwLCBDb2xvcjMuZnJvbVJHQig5MywgMjAsIDIyKSkKCQkJfSwKCQkJTnVtQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigxODIsIDEyNywgMTI4KSwKCQkJRHJvcGRvd25Db2xvclBpY2tlckltYWdlQXJyb3dDb2xvcnMgPSBDb2xvcjMuZnJvbVJHQigxOTksIDE5OSwgMTk5KSwKCQkJTm90aWZpY2F0aW9uTm90aWZ5Q29sb3IgPSBDb2xvcjMuZnJvbVJHQig0MiwgNDQsIDQyKSwKCQkJTm90aWZpY2F0aW9uTm90aWZ5VGl0bGVDb2xvciA9IENvbG9yMy5mcm9tUkdCKDIzMSwgMjMxLCAyMzEpLAoJCQlOb3RpZmljYXRpb25Ob3RpZnlUZXh0Q29sb3IgPSBDb2xvcjMuZnJvbVJHQigxNzEsIDE3MSwgMTcwKSwKCQkJSWNvbkNvbG9yID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSksCgkJCUljb25TaGFkb3cgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKSwKCQkJTm90aWZ5QnV0dG9ucyA9IENvbG9yMy5mcm9tUkdCKDE2MywgMTYyLCAxNjUpCgkJfQoJfQp9CgoKbG9jYWwgUGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIFJ1blNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKQpsb2NhbCBVc2VySW5wdXRTZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJVc2VySW5wdXRTZXJ2aWNlIikKbG9jYWwgVHdlZW5TZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJUd2VlblNlcnZpY2UiKQpsb2NhbCBXb3Jrc3BhY2UgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpCmxvY2FsIFJlcGxpY2F0ZWRTdG9yYWdlID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpCmxvY2FsIFZpcnR1YWxJbnB1dCA9IGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpCmxvY2FsIERlYnJpcyA9IGdhbWU6R2V0U2VydmljZSgiRGVicmlzIikKbG9jYWwgU3RhdHMgPSBnYW1lOkdldFNlcnZpY2UoIlN0YXRzIikKbG9jYWwgTGlnaHRpbmcgPSBnYW1lOkdldFNlcnZpY2UoIkxpZ2h0aW5nIikKbG9jYWwgQ29yZUd1aSA9IGdhbWU6R2V0U2VydmljZSgiQ29yZUd1aSIpCgpsb2NhbCBMb2NhbFBsYXllciA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKbG9jYWwgQ2hhcmFjdGVyID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyIG9yIExvY2FsUGxheWVyLkNoYXJhY3RlckFkZGVkOldhaXQoKQpsb2NhbCBIdW1hbm9pZCA9IENoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkIikKbG9jYWwgQWxpdmUgPSBXb3Jrc3BhY2U6RmluZEZpcnN0Q2hpbGQoIkFsaXZlIikKbG9jYWwgbGFzdElucHV0VHlwZSA9IFVzZXJJbnB1dFNlcnZpY2U6R2V0TGFzdElucHV0VHlwZSgpCmxvY2FsIFJlbW90ZXMgPSB7fQpsb2NhbCBQYXJyeV9LZXkgPSBuaWwKbG9jYWwgUGFycmllcyA9IDAKbG9jYWwgcGFycnlGbGFnID0gZmFsc2UKbG9jYWwgc2VsZWN0ZWRQYXJyeU1vZGUgPSAiQ3VzdG9tIgpsb2NhbCBzcGFtVGhyZXNob2xkID0gMC4xCmxvY2FsIHNwYW1TcGVlZCA9IDE1CmxvY2FsIFNwYW1taW5nID0gZmFsc2UKbG9jYWwgQ2xvc2VzdF9FbnRpdHkgPSBuaWwKbG9jYWwgU2VydmVyU3RhdHNJdGVtID0gU3RhdHMuTmV0d29yay5TZXJ2ZXJTdGF0c0l0ZW0KbG9jYWwgYWN0aXZlTWV0aG9kID0gIlJlbW90ZSIKbG9jYWwgbGFzdFBhcnJ5VGltZSA9IDAKbG9jYWwgcGFycnlDb29sZG93biA9IDAuMDEKbG9jYWwgY29ubk1hbmFnZXIgPSB7fQpsb2NhbCBzd29yZE5hbWUgPSAiIgpsb2NhbCBlbmFibGVkID0gZmFsc2UKbG9jYWwgY3RybCwgcGxheUZ4LCBsYXN0UGFycnkgPSBuaWwsIG5pbCwgMApsb2NhbCBDYW1lcmFGT1ZFbmFibGVkID0gZmFsc2UKbG9jYWwgQ2FtZXJhRk9WID0gNzAKbG9jYWwgQW50aUxhZ0VuYWJsZWQgPSBmYWxzZQpsb2NhbCBPcmlnaW5hbE1hdGVyaWFsge0KbG9jYWwgT3JpZ2luYWxTaGFkb3dzID0gTGlnaHRpbmcuR2xvYmFsU2hhZG93cwpsb2NhbCBGdWxsQWNjdXJhY3lFbmFibGVkID0gZmFsc2UKbG9jYWwgYXV0b1BhcnJ5QWNjdXJhY3kgPSAyCmxvY2FsIG1hbnVhbFNwYW1FbmFibGVkID0gZmFsc2UKbG9jYWwgc3BhbW1pbmcgPSBmYWxzZQpsb2NhbCBzcGFtUmF0ZSA9IDAuMDA1CmdldGdlbnYoKS5TaW5ndWxhcml0eUFjdGl2ZSA9IGZhbHNlCmdldGdlbnYoKS5BZXJvZHluYW1pY0FjdGl2ZSA9IGZhbHNlCmdldGdlbnYoKS5BZXJvZHluYW1pY1RpbWUgPSAwCmdldGdlbnYoKS5EZWF0aFNsYXNoQWN0aXZlID0gZmFsc2UKZ2V0Z2VudigpLkRlYXRoU2xhc2hUaW1lID0gMApnZXRnZW52KCkuRGVhdGhTbGFzaFBhcnJ5Q291bnQgPSAwCmdldGdlbnYoKS5BZXJvZHluYW1pY0RldGVjdGlvblVuYWJsZWQgPSBmYWxzZSBnZXRnZW52KCkuRGVhdGhTbGFzaERldGVjdGlvblVuYWJsZWQgPSBmYWxzZQoKbG9jYWwgTm90aWZpY2F0aW9ucyA9IEhhd2s6QWRkTm90aWZpY2F0aW9ucygpCk5vdGlmaWNhdGlvbnM6Tm90aWZpY2F0aW9uKCJXZWxjb21lIGJhY2siLCJJJ20gZ2xhZCB5b3UncmUgaGVyZSIsIkRvbmUiLDEpCgpsb2NhbCBXaW5kb3cgPSBIYXdrOldpbmRvdyh7CglTY3JpcHROYW1lID0gIlJpc2UgfCBCbGFkZUJhbGwiLAoJRGVzdHJveUlmRXhpc3RzID0gdHJ1ZSwgLS1pZiBmYWxzZSwgZ3VpIHdvbnQgZGlzYXBwZWVyCglUaGVtZSA9ICJEYXJrIiAtLVRobWVzOiBQaW5rLCBXaGl0ZSwgRGFyawp9KQoKV2luZG93OkNsb3NlKHsKCXZpc2liaWxpdHkgPSB0cnVlLCAtLWlmIGZhbHNlLCBjbG9zZSBidXR0b24gd2lsbCBkaXNhcHBlYXIKCUNhbGxiYWNrID0gZnVuY3Rpb24oKQoJCVdpbmRvdzpEZXN0cm95KCkgLS1EZXN0cm95aW5nIEd1aSBGdW5jdGlvbgoJZW5kLAp9KQoKV2luZG93Ok1pbmltaXplKHsKCXZpc2liaWxpdHkgPSB0cnVlLCAtLWlmIGZhbHNlLCBjbG9zZSBidXR0b24gd2lsbCBkaXNhcHBlYXIKCU9wZW5CdXR0b24gPSB0cnVlLCAtLSBWaXNpYmxlID0gZmFsc2UgZXRjLCBvcGVuIGJ1dHRvbi4KCUNhbGxiYWNrID0gZnVuY3Rpb24oKQoJZW5kLAp9KQoKbG9jYWwgdGFiMSA9IFdpbmRvdzpUYWIoIkhvbWUiKSAKLS0gV2luZG93OlRhYigiVGFiIiwiVGFiIFRpdGxlIikKCmxvY2FsIGxhYmVsID0gdGFiMTpMYWJlbCgiV2VsY29tZSB0byBSaXNlIiwiVGhhbmsgeW91IGZvciB1c2luZyBpdCIpIAoKbG9jYWwgbGFiZWwgPSB0YWIxOkxhYmVsKCJFbmpveSB1c2luZyBSaXNlIiwiTWFkZSBCeSBIelNoYWRvdyIpIAoKdGFiMTpQYXJhZ3JhcGgoIlVwZGF0ZSBMaXN0Iix7Ik5vIFVwZGF0ZXMgQXZhaWxhYmxlIiwiQnV0IHlvdSdyZSBoZXJlIDspIn0pCm5ld3NlY3Rpb24gPSB0YWIxOlNlY3Rpb24oIkRpc2NvcmQgc2VydmVyIGl0J3MgYSBzZW5zaWJsZSBkZWNpc2lvbiIpCgpsb2NhbCBidXR0b24gPSB0YWIxOkJ1dHRvbigiRGlzY29yZCBTZXJ2ZXIiLCJDb3B5IExpbmsiLGZ1bmN0aW9uKCkKCXNldGNsaXBib2FyZCgiZGlzY29yZC5nZy91UERNeTVEcFdOIikKCU5vdGlmaWNhdGlvbnM6Tm90aWZ5KCJDb3BpZWQgVG8gQ2xpcGJvYXJkIiwiQ29weSBzdWNjZXNzZnVsIiwiTm90aWZ5IixmdW5jdGlvbigpCgllbmQpCmVuZCkKCmxvY2FsIHRhYjIgPSBXaW5kb3c6VGFiKCJNYWluIikgCmxvY2FsIGxhYmVsID0gdGFiMjpMYWJlbCgiTWFpbiIsIkF1dG8/Pz8hIT8/IT8hIikKCmxvY2FsIG5ld3NlYyA9IHRhYjI6U2VjdGlvbigiQXV0byBQYXJyeSAmIFNwYW0iKQoKdGFzay5zcGF3bihmdW5jdGlvbigpCglmb3IgXywgVmFsdWUgaW4gZ2V0Z2MoKSBkbwoJCWlmIHR5cGUoVmFsdWUpID09ICdmdW5jdGlvbicgYW5kIGlzbGNsb3N1cmUoVmFsdWUpIHRoZW4KCQkJbG9jYWwgUHJvdG9zID0gZGVidWcuZ2V0cHJvdG9zKFZhbHVlKQoJCQlsb2NhbCBVcHZhbHVlcyA9IGRlYnVnLmdldHVwdmFsdWVzKFZhbHVlKQoJCQlsb2NhbCBDb25zdGFudHMgPSBkZWJ1Zy5nZXRjb25zdGFudHMoVmFsdWUpCgkJCWlmICNQcm90b3MgPT0gNCBhbmQgI1VwdmFsdWVzID09IDI0IGFuZCAjQ29uc3RhbnRzID49IDEwMiB0aGVuCgkJCQlsb2NhbCBjNjIgPSBDb25zdGFudHNbNjJdCgkJCQlsb2NhbCBjNjQgPSBDb25zdGFudHNbNjRdCgkJCQlsb2NhbCBjNjUgPSBDb25zdGFudHNbNjVdCgkJCQlSZW1vdGVzW2RlYnVnLmdldHVwdmFsdWUoVmFsdWUsIDE2KV0gPSBjNjIKCQkJCVBhcnJ5X0tleSA9IGRlYnVnLmdldHVwdmFsdWUoVmFsdWUsIDE3KQoJCQkJUmVtb3Rlcy5kZWJ1Zy5nZXR1cHZhbHVlKFZhbHVlLCAxOCldID0gYzY0CgkJCQlSZW1vdGVzW2RlYnVnLmdldHVwdmFsdWUoVmFsdWUsIDE5KV0gPSBjNjUKCQkJCWJyZWFrCgkJCWVuZAoJCWVuZAoJZW5kCglpZiBub3QgUGFycnlfS2V5IG9yIG5leHQoUmVtb3RlcykgPT0gbmlsIHRoZW4KCQlhY3RpdmVNZXRob2QgPSAiRiBLZXkiCgllbmQKZW5kKQoKbG9jYWwgZnVuY3Rpb24gZXhlY3V0ZVR3ZWVuKHRhcmdldCwgaW5mbywgcHJvcHMpCglsb2NhbCB0dyA9IFR3ZWVuU2VydmljZTpDcmVhdGUodGFyZ2V0LCBpbmZvLCBwcm9wcykKCXR3OlBsYXkoKQoJdGFzay53YWl0KGluZm8uVGltZSkKCURlYnJpczpBZGRJdGVtKHR3LCAwKQoJdHc6RGVzdHJveSgpCmVuZAoKbG9jYWwgU3BhbSA9IHt9CgpmdW5jdGlvbiBTcGFtLkdldF9DbG9zZXN0KCkKCWxvY2FsIE1heF9EaXN0YW5jZSA9IG1hdGguaHVnZQoJQ2xvc2VzdF9FbnRpdHkgPSBuaWwKCWZvciBfLCBFbnRpdHkgaW4gcGFpcnMoV29ya3NwYWNlLkFsaXZlOkdldENoaWxkcmVuKCkpIGRvCgkJaWYgdG9zdHJpbmcoRW50aXR5KSB+PSB0b3N0cmluZyhMb2NhbFBsYXllcikgdGhlbgoJCQlsb2NhbCBEaXN0YW5jZSA9IExvY2FsUGxheWVyOkRpc3RhbmNlRnJvbUNoYXJhY3RlcihFbnRpdHkuUHJpbWFyeVBhcnQuUG9zaXRpb24pCgkJCWlmIERpc3RhbmNlIDwgTWF4X0Rpc3RhbmNlIHRoZW4KCQkJCU1heF9EaXN0YW5jZSA9IERpc3RhbmNlCgkJCQlDbG9zZXN0X0VudGl0eSA9IEVudGl0eQoJCQllbmQKCQllbmQKCWVuZAoJcmV0dXJuIENsb3Nlc3RfRW50aXR5CmVuZAoKZnVuY3Rpb24gU3BhbS5FbnRpdHlfUHJvcGVydGllcygpCglTcGFtLkdldF9DbG9zZXN0KCkKCWlmIG5vdCBDbG9zZXN0X0VudGl0eSB0aGVuCgkJcmV0dXJuIHtWZWxvY2l0eT1WZWN0b3IzLnplcm8sIERpcmVjdGlvbj1WZWN0b3IzLnplcm8sIERpc3RhbmNlPW1hdGguaHVnZX0KCWVuZAoJbG9jYWwgRW50aXR5X1ZlbG9jaXR5ID0gQ2xvc2VzdF9FbnRpdHkuUHJpbWFyeVBhcnQuVmVsb2NpdHkKCWxvY2FsIEVudGl0eV9EaXJlY3Rpb24gPSAoTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LlBvc2l0aW9uIC0gQ2xvc2VzdF9FbnRpdHkuUHJpbWFyeVBhcnQuUG9zaXRpb24pLlVuaXQKCWxvY2FsIEVudGl0eV9EaXN0YW5jZSA9IChMb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuUG9zaXRpb24gLSBDbG9zZXN0X0VudGl0eS5QcmltYXJ5UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlCglyZXR1cm4ge1ZlbG9jaXR5PUVudGl0eV9WZWxvY2l0eSwgRGlyZWN0aW9uPUVudGl0eV9EaXJlY3Rpb24sIERpc3RhbmNlPUVudGl0eV9EaXN0YW5jZX0KZW5kCgpmdW5jdGlvbiBTcGFtLkZldGNoQmFsbCgpCglmb3IgXywgYiBpbiBwYWlycyhXb3Jrc3BhY2UuQmFsbHM6R2V0Q2hpbGRyZW4oKSkgZG8KCQlpZiBiOkdldEF0dHJpYnV0ZSgicmVhbEJhbGwiKSB0aGVuCgkJCWIuQ2FuQ29sbGlkZSA9IGZhbHNlCgkJCXJldHVybiBiCgkJZW5kCgllbmQKZW5kCgpmdW5jdGlvbiBTcGFtLkJhbGxfUHJvcGVydGllcygpCglsb2NhbCBCYWxsID0gU3BhbS5GZXRjaEJhbGwoKQoJaWYgbm90IEJhbGwgdGhlbgoJCXJldHVybiB7VmVsb2NpdHk9VmVjdG9yMy56ZXJvLCBEaXJlY3Rpb249VmVjdG9yMy56ZXJvLCBEaXN0YW5jZT1tYXRoLmh1Z2UsIERvdD0wfQoJZW5kCglsb2NhbCBCYWxsX1ZlbG9jaXR5ID0gQmFsbDpGaW5kRmlyc3RDaGlsZCgiem9vbWllcyIpIGFuZCBCYWxsLnpvb21pZXMuVmVjdG9yVmVsb2NpdHkgb3IgVmVjdG9yMy56ZXJvCglsb2NhbCBCYWxsX0RpcmVjdGlvbiA9IChMb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuUG9zaXRpb24gLSBCYWxsLlBvc2l0aW9uKS5Vbml0Cglsb2NhbCBCYWxsX0Rpc3RhbmNlID0gKExvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5Qb3NpdGlvbiAtIEJhbGwuUG9zaXRpb24pLk1hZ25pdHVkZQoJbG9jYWwgQmFsbF9Eb3QgPSBCYWxsX0RpcmVjdGlvbjpEb3QoQmFsbF9WZWxvY2l0eS5Vbml0KQoJcmV0dXJuIHtWZWxvY2l0eT1CYWxsX1ZlbG9jaXR5LCBEaXJlY3Rpb249QmFsbF9EaXJlY3Rpb24sIERpc3RhbmNlPUJhbGxfRGlzdGFuY2UsIERvdD1CYWxsX0RvdH0KZW5kCgpmdW5jdGlvbiBTcGFtLkNhbGNBY2N1cmFjeShwYXJhbXMpCglsb2NhbCBiYWxsID0gU3BhbS5GZXRjaEJhbGwoKQoJaWYgbm90IGJhbGwgdGhlbiByZXR1cm4gNTE3IGVuZAoJU3BhbS5HZXRfQ2xvc2VzdCgpCglsb2NhbCBhY2N1cmFjeSA9IDAKCWxvY2FsIHZlbCA9IGJhbGw6RmluZEZpcnN0Q2hpbGQoInpvb21pZXMiKSBhbmQgYmFsbC56b29taWVzLlZlY3RvclZlbG9jaXR5IG9yIGJhbGwuQXNzZW1ibHlMaW5lYXJWZWxvY2l0eQoJbG9jYWwgc3BkID0gdmVsLk1hZ25pdHVkZQoJbG9jYWwgdG9CYWxsID0gKExvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5Qb3NpdGlvbiAtIGJhbGwuUG9zaXRpb24pLlVuaXQKCWxvY2FsIGJhbGxEaXIgPSB2ZWwuVW5pdAoJbG9jYWwgZG90ID0gdG9CYWxsOkRvdChiYWxsRGlyKQoJbG9jYWwgdGFyZ2V0UG9zID0gQ2xvc2VzdF9FbnRpdHkgYW5kIENsb3Nlc3RfRW50aXR5LlByaW1hcnlQYXJ0LlBvc2l0aW9uIG9yIFZlY3RvcjMubmV3KCkKCWxvY2FsIHRhcmdldERpc3QgPSBMb2NhbFBsYXllcjpEaXN0YW5jZUZyb21DaGFyYWN0ZXIodGFyZ2V0UG9zKQoJbG9jYWwgbWF4U3BhbVJhbmdlID0gKHBhcmFtcy5QaW5nIC8gOCkgKyBtYXRoLm1pbihzcGQgLyA1LCAxMjApCglpZiBwYXJhbXMuRW50aXR5UHJvcHMuRGlzdGFuY2UgPiBtYXhTcGFtUmFuZ2Ugb3IgcGFyYW1zLkJhbGxQcm9wcy5EaXN0YW5jZSA+IG1heFNwYW1SYW5nZSBvciB0YXJnZXREaXN0ID4gbWF4U3BhbVJhbmdlIHRoZW4KCQlyZXR1cm4gYWNjdXJhY3kKCWVuZAoJbG9jYWwgbWF4U3BlZWQgPSA3IC0gbWF0aC5taW4oc3BkIC8gNSwgNykKCWxvY2FsIGFkakRvdCA9IG1hdGguY2xhbXAoZG90LCAtMSwgMSkgKiBtYXhTcGVlZAoJYWNjdXJhY3kgPSBtYXhTcGFtUmFuZ2UgLSBhZGpEb3QgKyAobWF0aC5yYW5kb20oKSAqIDUpCglyZXR1cm4gYWNjdXJhY3kKZW5kCgpsb2NhbCBBdXRvUGFycnkgPSB7fQpsb2NhbCBwYXJyeUFuaW1hdGlvbiA9IG5pbApsb2NhbCBwYXJyeURlbGF5ID0gMC4wNgpsb2NhbCBzbW9vdGhSYWRpYW5zID0gMApsb2NhbCBsYXN0U3RhYmxlVGltZSA9IHRpY2soKQpsb2NhbCByZWNlbnRWZWxzID0ge30KbG9jYWwgUHJldmlvdXNfVmVsb2NpdGllcyA9IHt9CmxvY2FsIGxhc3RXYXJwaW5nID0gdGljaygpCgpmdW5jdGlvbiBBdXRvUGFycnkucGxheVBhcnJ5QW5pbWF0aW9uKCkKCWxvY2FsIGJhc2VQYXJyeUFuaW0gPSBSZXBsaWNhdGVkU3RvcmFnZS5TaGFyZWQuU3dvcmRBUEkuQ29sbGVjdGlvbi5EZWZhdWx0OkZpbmRGaXJzdENoaWxkKCJHcmFiUGFycnkiKQoJbG9jYWwgY3VyclN3b3JkID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkdldEF0dHJpYnV0ZSgiQ3VycmVudGx5RXF1aXBwZWRTd29yZCIpCglpZiBub3QgY3VyclN3b3JkIG9yIG5vdCBiYXNlUGFycnlBbmltIHRoZW4gcmV0dXJuIGVuZAoJbG9jYWwgc3dvcmRJbmZvID0gUmVwbGljYXRlZFN0b3JhZ2UuU2hhcmVkLlJlcGxpY2F0ZWRJbnN0YW5jZXMuU3dvcmRzLkdldFN3b3JkOkludm9rZShjdXJyU3dvcmQpCglpZiBub3Qgc3dvcmRJbmZvIG9yIG5vdCBzd29yZEluZm8uQW5pbWF0aW9uVHlwZSB0aGVuIHJldHVybiBlbmQKCWZvciBfLCBmb2xkZXIgaW4gcGFpcnMoUmVwbGljYXRlZFN0b3JhZ2UuU2hhcmVkLlN3b3JkQVBJLkNvbGxlY3Rpb246R2V0Q2hpbGRyZW4oKSkgZG8KCQlpZiBmb2xkZXIuTmFtZSA9PSBzd29yZEluZm8uQW5pbWF0aW9uVHlwZSB0aGVuCgkJCWxvY2FsIHNlbE5hbWUgPSBmb2xkZXI6RmluZEZpcnN0Q2hpbGQoIkdyYWIiKSBhbmQgIkdyYWIiIG9yICJHcmFiUGFycnkiCgkJCWlmIGZvbGRlcjpGaW5kRmlyc3RDaGlsZChzZWxOYW1lKSB0aGVuCgkJCQliYXNlUGFycnlBbmltID0gZm9sZGVyW3NlbE5hbWVdCgkJCWVuZAoJCWVuZAoJZW5kCglwYXJyeUFuaW1hdGlvbiA9IExvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5BbmltYXRvcjpMb2FkQW5pbWF0aW9uKGJhc2VQYXJyeUFuaW0pCglwYXJyeUFuaW1hdGlvbjpQbGF5KCkKZW5kCgpmdW5jdGlvbiBBdXRvUGFycnkuZmV0Y2hCYWxscygpCglsb2NhbCBiYWxscyA9IHt9Cglmb3IgXywgYiBpbiBwYWlycyhXb3Jrc3BhY2UuQmFsbHM6R2V0Q2hpbGRyZW4oKSkgZG8KCQlpZiBiOkdldEF0dHJpYnV0ZSgicmVhbEJhbGwiKSB0aGVuCgkJCWIuQ2FuQ29sbGlkZSA9IGZhbHNlCgkJCXRhYmxlLmluc2VydChiYWxscywgYikKCQllbmQKCWVuZAoJcmV0dXJuIGJhbGxzCmVuZAoKZnVuY3Rpb24gQXV0b1BhcnJ5LkdldF9CYWxsKCkKCXJldHVybiBTcGFtLkZldGNoQmFsbCgpCmVuZAoKZnVuY3Rpb24gQXV0b1BhcnJ5LmNvbXB1dGVQYXJyeURhdGEobW9kZSkKCWxvY2FsIGV2ZW50VGFibGUgPSB7fQoJbG9jYWwgY2FtID0gV29ya3NwYWNlLkN1cnJlbnRDYW1lcmEKCWxvY2FsIGN1cnJlbnRNb3VzZVBvcwoJaWYgbGFzdElucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VCdXR0b24xIG9yIAoJCWxhc3RJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLk1vdXNlQnV0dG9uMiBvciAKCQlsYXN0SW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5LZXlib2FyZCB0aGVuCgkJbG9jYWwgbVBvcyA9IFVzZXJJbnB1dFNlcnZpY2U6R2V0TW91c2VMb2NhdGlvbigpCgkJY3VycmVudE1vdXNlUG9zID0geyBtUG9zLlgsIG1Qb3MuWSB9CgllbHNlCgkJY3VycmVudE1vdXNlUG9zID0geyBjYW0uVmlld3BvcnRTaXplLlggLyAyLCBjYW0uVmlld3BvcnRTaXplLlkgLyAyIH0KCWVuZAoJZm9yIF8sIGVudCBpbiBpcGFpcnMoQWxpdmU6R2V0Q2hpbGRyZW4oKSkgZG8KCQlldmVudFRhYmxlW3Rvc3RyaW5nKGVudCldID0gY2FtOldvcmxkVG9TY3JlZW5Qb2ludChlbnQuUHJpbWFyeVBhcnQuUG9zaXRpb24pCgllbmQKCWxvY2FsIGNhbVBvcyA9IGNhbS5DRnJhbWUuUG9zaXRpb24KCWlmIG1vZGUgPT0gIkN1c3RvbSIgdGhlbgoJCXJldHVybiB7IDAsIGNhbS5DRnJhbWUsIGV2ZW50VGFibGUsIGN1cnJlbnRNb3VzZVBvcyB9CgllbHNlaWYgbW9kZSA9PSAiQmFja3dhcmRzIiB0aGVuCgkJcmV0dXJuIHsgMCwgQ0ZyYW1lLm5ldyhjYW1Qb3MsIGNhbVBvcyAtIChjYW0uQ0ZyYW1lLkxvb2tWZWN0b3IgKiAxMDAwKSksIGV2ZW50VGFibGUsIGN1cnJlbnRNb3VzZVBvcyB9CgllbHNlaWYgbW9kZSA9PSAiUmFuZG9tIiB0aGVuCgkJcmV0dXJuIHsgMCwgQ0ZyYW1lLm5ldyhjYW1Qb3MsIFZlY3RvcjMubmV3KG1hdGgucmFuZG9tKC0zMDAwLDMwMDApLCBtYXRoLnJhbmRvbSgtMzAwMCwzMDAwKSwgbWF0aC5yYW5kb20oLTMwMDAsMzAwMCkpKSwgZXZlbnRUYWJsZSwgY3VycmVudE1vdXNlUG9zIH0KCWVsc2VpZiBtb2RlID09ICJTdHJhaWdodCIgdGhlbgoJCXJldHVybiB7IDAsIENGcmFtZS5uZXcoY2FtUG9zLCBjYW1Qb3MgKyAoY2FtLkNGcmFtZS5Mb29rVmVjdG9yICogMTAwMCkpLCBldmVudFRhYmxlLCBjdXJyZW50TW91c2VQb3MgfQoJZWxzZWlmIG1vZGUgPT0gIlVwIiB0aGVuCgkJcmV0dXJuIHsgMCwgQ0ZyYW1lLm5ldyhjYW1Qb3MsIGNhbVBvcyArIChjYW0uQ0ZyYW1lLlVwVmVjdG9yICogMTAwMCkpLCBldmVudFRhYmxlLCBjdXJyZW50TW91c2VQb3MgfQoJZWxzZWlmIG1vZGUgPT0gIlJpZ2h0IiB0aGVuCgkJcmV0dXJuIHsgMCwgQ0ZyYW1lLm5ldyhjYW1Qb3MsIGNhbVBvcyArIChjYW0uQ0ZyYW1lLlJpZ2h0VmVjdG9yICogMTAwMCkpLCBldmVudFRhYmxlLCBjdXJyZW50TW91c2VQb3MgfQoJZWxzZWlmIG1vZGUgPT0gIkxlZnQiIHRoZW4KCQlyZXR1cm4geyAwLCBDRnJhbWUubmV3KGNhbVBvcywgY2FtUG9zIC0gKGNhbS5DRnJhbWUuUmlnaHRWZWN0b3IgKiAxMDAwKSksIGV2ZW50VGFibGUsIGN1cnJlbnRNb3VzZVBvcyB9CgllbHNlaWYgbW9kZSA9PSAiRG90IiB0aGVuCgkJbG9jYWwgYmFsbCA9IEF1dG9QYXJyeS5HZXRfQmFsbCgpCgkJaWYgYmFsbCB0aGVuCgkJCXJldHVybiB7IDAsIENGcmFtZS5uZXcoY2FtUG9zLCBiYWxsLlBvc2l0aW9uKSwgZXZlbnRUYWJsZSwgY3VycmVudE1vdXNlUG9zIH0KCQllbHNlCgkJCXJldHVybiB7IDAsIGNhbS5DRnJhbWUsIGV2ZW50VGFibGUsIGN1cnJlbnRNb3VzZVBvcyB9CgkJZW5kCgllbHNlCgkJcmV0dXJuIG1vZGUKCWVuZAplbmQKCmxvY2FsIGZ1bmN0aW9uIGNhblByb2Nlc3NQYXJyeSgpCglsb2NhbCBocnAgPSBMb2NhbFBsYXllci5DaGFyYWN0ZXIgbmQgTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKCWlmIG5vdCBocnAgdGhlbiByZXR1cm4gZmFsc2UgZW5kCglpZiBocnAgOkZpbmRGaXJzdENoaWxkKCJTaW5ndWxhcml0eUNhcGUiKSB0aGVuCgkJZ2V0Z2VudigpLlNpbmd1bGFyaXR5QWN0aXZlID0gdHJ1ZQoJZWxzZQoJCWdldGdlbnYoKS5TaW5ndWxhcml0eUFjdGl2ZSA9IGZhbHNlCgllbmQKCWlmIGdldGdlbnYoKS5EZWF0aFNsYXNoQWN0aXZlIGFuZCBnZXRnZW52KCkuRGVhdGhTbGFzaFBhcnJ5Q291bnQgPj0gMzQgdGhlbgoJCXJldHVybiBmYWxzZQoJZW5kCglyZXR1cm4gbm90IGdldGdlbnYoKS5TaW5ndWxhcml0eUFjdGl2ZSBhbmQgbm90IGdldGdlbnYoKS5BZXJvZHluYW1pY0FjdGl2ZQplbmQKCmZ1bmN0aW9uIEF1dG9QYXJyeS5QYXJyeShpc1NwYW0pCglpZiB0aWNrKCkgLSBsYXN0UGFycnlUaW1lIDwgcGFycnlDb29sZG93biB0aGVuIHJldHVybiBmYWxzZSBlbmQKCWxhc3RQYXJyeVRpbWUgPSB0aWNrKCkKCWxvY2FsIHByZXNzZXMgPSBpc1NwYW0gYW5kIHNwYW1TcGVlZCBvciAxCglpZiBhY3RpdmVNZXRob2QgPT0gIkYgS2V5IiB0aGVuCgkJZm9yIGkgPSAxLCBwcmVzc2VzIGRvCgkJCVZpcnR1YWxJbnB1dDpTZW5kS2V5RXZlbnQodHJ1ZSwgRW51bS5LZXlDb2RlLkYsIGZhbHNlLCBnYW1lKQoJCQlWaXJ0dWFsSW5wdXQ6U2VuZEtleUV2ZW50KGZhbHNlLCBFbnVtLktleUNvZGUuRiwgZmFsc2UsIGdhbWUpCgkJZW5kCgllbHNlCgkJbG9jYWwgUGFycnlfRGF0YSA9IEF1dG9QYXJyeS5jb21wdXRlUGFycnlEYXRhKHNlbGVjdGVkUGFycnlNb2RlKQoJCWZvciBpID0gMSwgcHJlc3NlcyBkbwoJCQlmb3IgUmVtb3RlLCBBcmdzIGluIHBhaXJzKFJlbW90ZXMpIGRvCgkJCQlSZW1vdGU6RmlyZVNlcnZlcihBcmdzLCBQYXJyeV9LZXksIFBhcnJ5X0RhdGFbMV0sIFBhcnJ5X0RhdGFbMl0sIFBhcnJ5X0RhdGFbM10sIFBhcnJ5X0RhdGFbNF0pCgkJCWVuZAoJCWVuZAoJZW5kCglpZiBQYXJyaWVzID4gNyB0aGVuCgkJcmV0dXJuIGZhbHNlCgllbmQKCVBhcnJpZXMgPSBQYXJyaWVzICsgMQoJdGFzay5kZWxheSgwLjUsIGZ1bmN0aW9uKCkgCgkJaWYgUGFycmllcyA+IDAgdGhlbgoJCQlQYXJyaWVzID0gUGFycmllcyAtIDEKCQllbmQKCWVuZCkKCWlmIGdldGdlbnYoKS5EZWF0aFNsYXNoQWN0aXZlIHRoZW4KCQlnZXRnZW52KCkuRGVhdGhTbGFzaFBhcnJ5Q291bnQgPSBnZXRnZW52KCkuRGVhdGhTbGFzaFBhcnJ5Q291bnQgKyAxCgkJaWYgZ2V0Z2VudigpLkRlYXRoU2xhc2hQYXJyeUNvdW50ID49IDM1IHRoZW4KCQkJZ2V0Z2VudigpLkRlYXRoU2xhc2hBY3RpdmUgPSBmYWxzZQoJCQlnZXRnZW52KCkuRGVhdGhTbGFzaFBhcnJ5Q291bnQgPSAwCgkJZW5kCgllbmQKCXJldHVybiB0cnVlCmVuZAoKZnVuY3Rpb24gQXV0b1BhcnJ5LnRyaWdnZXJQYXJyeShtb2RlKQoJaWYgbm90IGNhblByb2Nlc3NQYXJyeSgpIHRoZW4gcmV0dXJuIGVuZAoJc2VsZWN0ZWRQYXJyeU1vZGUgPSBtb2RlCglBdXRvUGFycnkuUGFycnkoZmFsc2UpCmVuZAoKbG9jYWwgZnVuY3Rpb24gbGVycChhLCBiLCB0KQoJcmV0dXJuIGEgKyAoYiAtIGEpICogdAplbmQKCmZ1bmN0aW9uIEF1dG9QYXJyeS5kZXRlY3RDdXJ2ZSgpCglsb2NhbCBiYWxsID0gQXV0b1BhcnJ5LkdldF9CYWxsKCkKCWlmIG5vdCBiYWxsIG9yIG5vdCBMb2NhbFBsYXllci5DaGFyYWN0ZXIgb3Igbm90IExvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydCB0aGVuIHJldHVybiBmYWxzZSBlbmQKCWxvY2FsIHpvb20gPSBiYWxsOkZpbmRGaXJzdENoaWxkKCJ6b29taWVzIikKCWlmIG5vdCB6b29tIHRoZW4gcmV0dXJuIGZhbHNlIGVuZAoJbG9jYWwgcGluZyA9IFN0YXRzLk5ldHdvcmsuU2VydmVyU3RhdHNJdGVtWyJEYXRhIFBpbmciXTpHZXRWYWx1ZSgpIC8gMTAwMAoJbG9jYWwgdGFyZ2V0ID0gYmFsbDpHZXRBdHRyaWJ1dGUoInRhcmdldCIpIGFuZCBBbGl2ZTpGaW5kRmlyc3RDaGlsZChiYWxsOkdldEF0dHJpYnV0ZSgidGFyZ2V0IikpCglpZiB0YXJnZXQgdGhlbgoJCWlmIHRhcmdldDpGaW5kRmlyc3RDaGlsZCgiTWF4U2hpZWxkIikgYW5kIHRhcmdldC5OYW1lIH49IHRvc3RyaW5nKExvY2FsUGxheWVyKSBhbmQgKExvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5Qb3NpdGlvbiAtIGJhbGwuUG9zaXRpb24pLk1hZ25pdHVkZSA8IDUwIHRoZW4KCQkJcmV0dXJuIGZhbHNlCgkJZW5kCgllbmQKCWlmIGJhbGw6RmluZEZpcnN0Q2hpbGQoIlRpbWVIb2xlMSIpIGFuZCB0YXJnZXQgYW5kIHRhcmdldC5OYW1lIH49IHRvc3RyaW5nKExvY2FsUGxheWVyKSBhbmQgKExvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5Qb3NpdGlvbiAtIGJhbGwuUG9zaXRpb24pLk1hZ25pdHVkZSA8IDEwMCB0aGVuCgkJcmV0dXJuIGZhbHNlCgllbmQKCWlmIGJhbGw6RmluZEZpcnN0Q2hpbGQoIldFTUFaT09LSUVHTyIpIGFuZCB0YXJnZXQgYW5kIHRhcmdldC5OYW1lIH49IHRvc3RyaW5nKExvY2FsUGxheWVyKSBhbmQgKExvY2FsUGxheWVyLkNoYXJhY3Rlci5QcmltYXJ5UGFydC5Qb3NpdGlvbiAtIGJhbGwuUG9zaXRpb24pLk1hZ25pdHVkZSA8IDEwMCB0aGVuCgkJcmV0dXJuIGZhbHNlCgllbmQKCWlmIGJhbGw6RmluZEZpcnN0Q2hpbGQoIkF0MiIpIGFuZCB6b29tLlZlY3RvclZlbG9jaXR5Lk1hZ25pdHVkZSA8PSAwIHRoZW4KCQlyZXR1cm4gdHJ1ZQoJZW5kCglsb2NhbCB0b3JuYWRvVGltZSA9IGdldGdlbnYoKS5BZXJvZHluYW1pY1RpbWUgb3IgdGljaygpCglpZiBiYWxsOkZpbmRGaXJzdENoaWxkKCJBZXJvRHluYW1pY1NsYXNoVkZYIikgdGhlbgoJCURlYnJpczpBZGRJdGVtKGJhbGwuQWVyb0R5bmFtaWNTbGFzaFZGWCwgMCkKCQl0b3JuYWRvVGltZSA9IHRpY2soKQoJCWdldGdlbnYoKS5BZXJvZHluYW1pY1RpbWUgPSB0b3JuYWRvVGltZQoJCWdldGdlbnYoKS5BZXJvZHluYW1pY0FjdGl2ZSA9IHRydWUKCWVuZAoJbG9jYWwgcnVudGltZSA9IFdvcmtzcGFjZS5SdW50aW1lCglpZiBydW50aW1lOkZpbmRGaXJzdENoaWxkKCJUb3JuYWRvIikgdGhlbgoJCWlmICh0aWNrKCkgLSB0b3JuYWRvVGltZSkgPCAoKHJ1bnRpbWUuVG9ybmFkbzpHZXRBdHRyaWJ1dGUoIlRvcm5hZG9UaW1lIikgb3IgMSkgKyAwLjMxNDE1OSkgdGhlbgoJCQlyZXR1cm4gdHJ1ZQoJCWVuZAoJZW5kCglsb2NhbCBjdXJyZW50VmVsID0gem9vbS5WZWN0b3JWZWxvY2l0eQoJdGFibGUuaW5zZXJ0KHJlY2VudFZlbHMsIHtWZWxvY2l0eSA9IGN1cnJlbnRWZWwsIFRpbWUgPSB0aWNrKCl9KQoJaWYgI3JlY2VudFZlbHMgPiA1IHRoZW4KCQl0YWJsZS5yZW1vdmUocmVjZW50VmVscywgMSkKCWVuZAoJbG9jYWwgcGxheWVyUG9zID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0LlBvc2l0aW9uCglsb2NhbCBiYWxsUG9zID0gYmFsbC5Qb3NpdGlvbgoJbG9jYWwgdG9CYWxsID0gKHBsYXllclBvcyAtIGJhbGxQb3MpLlVuaXQKCWxvY2FsIHNwZWVkID0gY3VycmVudFZlbC5NYWduaXR1ZGUKCWxvY2FsIGJhbGxEaXIgPSBjdXJyZW50VmVsLlVuaXQKCWxvY2FsIGRvdFZhbCA9IHRvQmFsbDpEb3QoYmFsbERpcikKCWlmIEZ1bGxBY2N1cmFjeUVuYWJsZWQgYW5kIGRvdFZhbCA+PSAwLjk5NSB0aGVuCgkJcmV0dXJuIGZhbHNlCgllbmQKCWxvY2FsIGRpc3RhbmNlID0gKHBsYXllclBvcyAtIGJhbGxQb3MpLk1hZ25pdHVkZQoJbG9jYWwgcmVhY2hUaW1lID0gZGlzdGFuY2UgLyBtYXRoLm1heChzcGVlZCwgMSkgLSBwaW5nICogMC4zCglsb2NhbCBzcGVlZFRocmVzaG9sZCA9IGxlcnAoNCwgMjAsIG1hdGgubWluKHNwZWVkIC8gMTIwMCwgMSkpCglsb2NhbCBhbmdsZVRocmVzaG9sZCA9IDIwICogbWF0aC5tYXgoZG90VmFsLCAwKQoJbG9jYWwgZG90VGhyZXNob2xkID0gbGVycCgwLjEsIDAuMywgbWF0aC5taW4ocGluZywgMSkpIC0gcGluZyAqIDAuMwoJbG9jYWwgYmFsbERpc3RhbmNlVGhyZXNob2xkID0gNiAtIG1hdGgubWluKGRpc3RhbmNlIC8gMTIwMCwgNikgKyBzcGVlZFRocmVzaG9sZCArIGFuZ2xlVGhyZXNob2xkCglpZiBGdWxsQWNjdXJhY3lFbmFibGVkIHRoZW4KCQliYWxsRGlzdGFuY2VUaHJlc2hvbGQgPSBiYWxsRGlzdGFuY2VUaHJlc2hvbGQgKiAwLjcKCQlkb3RUaHJlc2hvbGQgPSBkb3RUaHJlc2hvbGQgKiAwLjgKCQlhbmdsZVRocmVzaG9sZCA9IGFuZ2xlVGhyZXNob2xkICogMC44CgllbmQKCWlmIHNwZWVkID4gMTAwIGFuZCByZWFjaFRpbWUgPiBwaW5nICogNCB0aGVuCgkJIG5vY2FsIHNwZWVkIDwgMzAwIHRoZW4KCQkJYmFsbERpc3RhbmNlVGhyZXNob2xkID0gbWF0aC5tYXgoYmFsbERpc3RhbmNlVGhyZXNob2xkIC0gNiwgNikKCQllbHNlaWYgc3BlZWQgPCA2MDAgdGhlbgoJCQliYWxsRGlzdGFuY2VUaHJlc2hvbGQgPSBtYXRoLm1heChiYWxsRGlzdGFuY2VUaHJlc2hvbGQgLSA3LCA3KQoJCWVsc2VpZiBzcGVlZCA8IDEwMDAgdGhlbgoJCQliYWxsRGlzdGFuY2VUaHJlc2hvbGQgPSBtYXRoLm1heChiYWxsRGlzdGFuY2VUaHJlc2hvbGQgLSA4LCA4KQoJCWVsc2VpZiBzcGVlZCA8IDE1MDAgdGhlbgoJCQliYWxsRGlzdGFuY2VUaHJlc2hvbGQgPSBtYXRoLm1heChiYWxsRGlzdGFuY2VUaHJlc2hvbGQgLSA5LCA5KQoJCWVsc2UKCQkJYmFsbERpc3RhbmNlVGhyZXNob2xkID0gbWF0aC5tYXgoYmFsbERpc3RhbmNlVGhyZXNob2xkIC0gMTAsIDEwKQoJCWVuZAoJZW5kCglpZiBkaXN0YW5jZSA8IGJhbGxEaXN0YW5jZVRocmVzaG9sZCB0aGVuCgkJcmV0dXJuIGZhbHNlCgllbmQKCWxvY2FsIGJha3dhcmRzQ3VydmVEZXRlY3RlZCA9IGZhbHNlCglsb2NhbCBiYWNrd2FyZHNBbmdsZVRocmVzaG9sZCA9IG1hdGgubWF4KDcwLCBtYXRoLm1pbig4MCwgNzAgKyAoc3BlZWQgLyAzMDApKSkKCWlmIEZ1bGxBY2N1cmFjeUVuYWJsZWQgdGhlbgoJCWJhY2t3YXJkc0FuZ2xlVGhyZXNob2xkID0gYmFja3dhcmRzQW5nbGVUaHJlc2hvbGQgKiAwLjgKCWVuZAoJbG9jYWwgaG9yaXpEaXJlY3Rpb24gPSBWZWN0b3IzLm5ldyhwbGF5ZXJQb3MuWCAtIGJhbGxQb3MuWCwgMCwgcGxheWVyUG9zLlogLSBiYWxsUG9zLlopCglpZiBob3JpekRpcmVjdGlvbi5NYWduaXR1ZGUgPiAwIHRoZW4KCQlob3JpekRpcmVjdGlvbiA9IGhvcml6RGlyZWN0aW9uLlVuaXQKCQlsb2NhbCBhd2F5RnJvbVBsYXllciA9IC1ob3JpekRpcmVjdGlvbgoJCWxvY2FsIGhvcml6QmFsbERpciA9IFZlY3RvcjMubmV3KGJhbGxEaXIuWCwgMCwgYmFsbERpci5aKQoJCWlmIGhvcml6QmFsbERpci5NYWduaXR1ZGUgPiAwIHRoZW4KCQkJaG9yaXpCYWxsRGlyID0gaG9yaXpCYWxsRGlyLlVuaXQKCQkJbG9jYWwgYmFja3dhcmRzQW5nbGUgPSBtYXRoLmRlZyhtYXRoLmFjb3MobWF0aC5jbGFtcChhd2F5RnJvbVBsYXllcjpEb3QoaG9yaXpCYWxsRGlyKSwgLTEsIDEpKSkKCQkJaWYgYmFja3dhcmRzQW5nbGUgPCBiYWNrd2FyZHNBbmdsZVRocmVzaG9sZCB0aGVuCgkJCQliYWNrd2FyZHNDdXJ2ZURldGVjdGVkID0gdHJ1ZQoJCQllbmQKCQllbmQKCWVuZAoJbG9jYWwgdmVsb2NpdHlDaGFuZ2UgPSAwCglpZiAjcmVjZW50VmVscyA+PSAyIHRoZW4KCQlsb2NhbCBkZWx0YVRpbWUgPSByZWNlbnRWZWxzWyNyZWNlbnRWZWxzXS5UaW1lIC0gcmVjZW50VmVsc1sjcmVjZW50VmVscy0xXS5UaW1lCgkJaWYgZGVsdGFUaW1lID4gMCB0aGVuCgkJCWxvY2FsIGFjY2VsID0gKHJlY2VudFZlbHNbI3JlY2VudFZlbHNdLlZlbG9jaXR5IC0gcmVjZW50VmVsc1sjcmVjZW50VmVscy0xXS5WZWxvY2l0eSkuTWFnbml0dWRlIC8gZGVsdGFUaW1lCgkJCXZlbG9jaXR5Q2hhbmdlID0gbWF0aC5taW4oYWNjZWwgLyBtYXRoLm1heChzcGVlZCwgMC4xKSwgMSkKCQllbmQKCWVuZAoJdGFibGUuaW5zZXJ0KFByZXZpb3VzX1ZlbG9jaXRpZXMsIGN1cnJlbnRWZWwpCglpZiAjUHJldmlvdXNfVmVsb2NpdGllcyA+IDUgdGhlbgoJCXRhYmxlLnJlbW92ZShQcmV2aW91c19WZWxvY2l0aWVzLCAxKQoJZW5kCglsb2NhbCBzaW1pbGFyaXR5ID0gMAoJaWYgI1ByZXZpb3VzX1ZlbG9jaXRpZXMgPiAxIHRoZW4KCQlsb2NhbCBwcmV2VmVsID0gUHJldmlvdXNfVmVsb2NpdGllc1sjUHJldmlvdXNfVmVsb2NpdGllcy0xXQoJCWxvY2FsIHZlbERpZmYgPSAoY3VycmVudFZlbCAtIHByZXZWZWwpLk1hZ25pdHVkZQoJCXNpbWlsYXJpdHkgPSAxIC0gbWF0aC5taW4odmVsRGlmZiAvIG1hdGgubWF4KHByZXZWZWwuTWFnbml0dWRlLCAwLjEpLCAwLjcpCgllbmQKCWlmIChzaW1pbGFyaXR5IDwgMC42IG9yIHZlbG9jaXR5Q2hhbmdlID4gMC41KSBhbmQgKHRpY2soKSAtIGxhc3RXYXJwaW5nKSA+IDAuMDYgdGhlbgoJCWxhc3RXYXJwaW5nID0gdGljaygpCgkJcmV0dXJuIHRydWUKCWVuZAoJbG9jYWwgcHJlZGljdGVkUG9zID0gYmFsbFBvcyArIGN1cnJlbnRWZWwgKiByZWFjaFRpbWUKCWxvY2FsIHByZWRpY3RlZERpciA9IChwbGF5ZXJQb3MgLSBwcmVkaWN0ZWRQb3MpLlVuaXQKCWxvY2FsIHByZWRpY3RlZERvdCA9IHByZWRpY3RlZERpcjpEb3QoYmFsbERpcikKCWlmIHByZWRpY3RlZERvdCA8IGRvdFRocmVzaG9sZCBvciBkb3RWYWwgPCBkb3RUaHJlc2hvbGQgb3IgYmFja3dhcmRzQ3VydmVEZXRlY3RlZCB0aGVuCgkJcmV0dXJuIHRydWUKCWVuZAoJcmV0dXJuIGZhbHNlCmVuZAoKbG9jYWwgZnVuY3Rpb24gZ2V0U2xhc2gobmFtZSkKCWxvY2FsIHN3b3JkcyA9IHJlcXVpcmUoUmVwbGljYXRlZFN0b3JhZ2UuU2hhcmVkLlJlcGxpY2F0ZWRJbnN0YW5jZXMuU3dvcmRzKQoJbG9jYWwgcyA9IHN3b3JkczpHZXRTd29yZChuYW1lKQoJcmV0dXJuIChzIGFuZCBzLlNsYXNoTmFtZSkgb3IgIlNsYXNoRWZmZWN0IgplbmQKCmxvY2FsIGZ1bmN0aW9uIHNldFN3b3JkKCkKCWlmIG5vdCBlbmFibGVkIHRoZW4gcmV0dXJuIGVuZAoJbG9jYWwgc2xhc2ggPSBnZXRTbGFzaChzd29yZE5hbWUpCglzZXR1cHZhbHVlKHJhd2dldChyZXF1aXJlKFJlcGxpY2F0ZWRTdG9yYWdlLlNoYXJlZC5SZXBsaWNhdGVkSW5zdGFuY2VzLlN3b3JkcyksICJFcXVpcFN3b3JkVG8iKSwgMiwgZmFsc2UpCglyZXF1aXJlKFJlcGxpY2F0ZWRTdG9yYWdlLlNoYXJlZC5SZXBsaWNhdGVkSW5zdGFuY2VzLlN3b3Jkcyk6RXF1aXBTd29yZFRvKExvY2FsUGxheWVyLkNoYXJhY3Rlciwgc3dvcmROYW1lKQoJaWYgY3RybCB0aGVuCgkJY3RybDpTZXRTd29yZChzd29yZE5hbWUpCgllbmQKZW5kCgp0YXNrLnNwYXduKGZ1bmN0aW9uKCkKCXdoaWxlIG5vdCBjdHJsIGRvCgkJZm9yIF8sIHYgaW4gZ2V0Y29ubmVjdGlvbnMoUmVwbGljYXRlZFN0b3JhZ2UuUmVtb3Rlcy5GaXJlU3dvcmRJbmZvLk9uQ2xpZW50RXZlbnQpIGRvCgkJCWlmIHYuRnVuY3Rpb24gYW5kIGlzbGNsb3N1cmUodi5GdW5jdGlvbikgdGhlbgoJCQkJbG9jYWwgdSA9IGdldHVwdmFsdWVzKHYuRnVuY3Rpb24pCgkJCQlpZiAjdSA9PSAxIGFuZCB0eXBlKHVbMV0pID09ICJ0YWJsZSIgdGhlbgoJCQkJCWN0cmwgPSB1WzFdCgkJCQkJYnJlYWsKCQkJCWVuZAoJCQllbmQKCQllbmQKCQl0YXNrLndhaXQoMC4xKQoJZW5kCmVuZCkKCnRhc2suc3BhZ24oZnVuY3Rpb24oKQoJd2hpbGUgbm90IHBsYXlGeCBkbwoJCWZvciBfLCB2IGluIGdldGNvbm5lY3Rpb25zKFJlcGxpY2F0ZWRTdG9yYWdlLlJlbW90ZXMuUGFycnlTdWNjZXNzQWxsLk9uQ2xpZW50RXZlbnQpIGRvCgkJCWlmIHYuRnVuY3Rpb24gYW5kIGdldGluZm8odi5GdW5jdGlvbikubmFtZSA9PSAicGFycnlTdWNjZXNzQWxsIiB0aGVuCgkJCQlwbGF5RnggPSB2LkZ1bmN0aW9uCgkJCQlicmVhawoJCQllbmQKCQllbmQKCQl0YXNrLndhaXQoMC4xKQoJZW5kCmVuZCkKClJlcGxpY2F0ZWRTdG9yYWdlLlJlbW90ZXMuUGFycnlTdWNjZXNzQWxsLk9uQ2xpZW50RXZlbnQ6Q29ubmVjdChmdW5jdGlvbi4uLikKCWxvY2FsIGFyZ3MgPSB7Li4ufQoJaWYgdG9zdHJpbmcoYXJnc1s0XSkofiB+PSBMb2NhbFBsYXllci5OYW1lIHRoZW4KCQlsYXN0UGFycnkgPSB0aWNrKCkKCWVsc2VpZiBlbmFibGVkIHRoZW4KCQlhcmdzWzFdID0gZ2V0U2xhc2goc3dvcmROYW1lKQoJCWFyZ3NbM10gPSBzd29yZE5hbWUKCWVuZAoJaWYgcGxheUZ4IHRoZW4KCQlwbGF5RngodW5wYWNrKGFyZ3MpKQoJZW5kCmVuZCkKCmxvY2FsIGZ1bmN0aW9uIGFwcGx5QW50aUxhZyhzdGF0ZSkKCWlmIHN0YXRlIHRoZW4KCQlPcmlnaW5hbE1hdGVyaWFscyA9IHt9CgkJaWYgXywgb2JqIGluIHBhaXJzKFdvcmtzcGFjZTpHZXREZXNjZW5kYW50cygpKSBkbwoJCQlpZiBvYmo6SXNBKCJCYXNlUGFydCIpIGFuZCBvYmouTWF0ZXJpYWwgfj0gRW51bS5NYXRlcmlhbC5TbW9vdGhQbGFzdGljIHRoZW4KCQkJCU9yaWdpbmFsTWF0ZXJpYWxzW29ial0gPSBvYmouTWF0ZXJpYWwKCQkJCW9iai5NYXRlcmlhbCA9IEVudW0uTWF0ZXJpYWwuU21vb3RoUGxhc3RpYwoJCQllbmQKCQkJaWYgb2JqOklzQSgiUGFydGljbGVFbWl0dGVyIikgb3Igb2JqOklzQSgiQmVhbSIpIG9yIG9iajpJc0EoIlRyYWlsIikgdGhlbgoJCQkJb2JqLkVuYWJsZWQgPSBmYWxzZQoJCQllbmQKCQllbmQKCQlMaWdodGluZy5HbG9iYWxTaGFkb3dzID0gZmFsc2UKCWVsc2UKCQlmb3Igb2JqLCBtYXRlcmlhbCBpbiBwYWlycyhPcmlnaW5hbE1hdGVyaWFscykgZG8KCQkJaWYgb2JqIGFuZCBvYmouUGFyZW50IHRoZW4KCQkJCW9iai5NYXRlcmlhbCA9IG1hdGVyaWFsCgkJCWVuZAoJCWVuZAoJCWZvciBfLCBvYmogaW4gcGFpcnMoV29ya3NwYWNlOkdldERlc2NlbmRhbnRzKCkpIGRvCgkJCWlmIG9iajpJc0EoIlBhcnRpY2xlRW1pdHRlciIpIG9yIG9iajpJc0EoIkJlYW0iKSBvciBvYmo6SXNBKCJUcmFpbCIpIHRoZW4KCQkJCW9iai5FbmFibGVkID0gdHJ1ZQoJCQllbmQKCQllbmQKCQlMaWdodGluZy5HbG9iYWxTaGFkb3dzID0gT3JpZ2luYWxTaGFkb3dzCgkJT3JpZ2luYWxNYXRlcmlhbHMgPSB7fQoJZW5kCmVuZAoKTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbihuZXdDaGFyKQoJQ2hhcmFjdGVyID0gbmV3Q2hhcgoJSHVtYW5vaWQgPSBuZXdDaGFyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWQiKQoJaWYgQW50aUxhZ0VuYWJsZWQgdGhlbgoJCWFwcGx5QW50aUxhZyh0cnVlKQoJZW5kCmVuZCkKCmxvY2FsIHNjcmVlbkd1aSA9IEluc3RhbmNlLm5ldygiU2NyZWVuR3VpIiwgQ29yZUd1aSkKc2NyZWVuR3VpLk5hbWUgPSAiUmlzZVNwYW1VSSIKc2NyZWVuR3VpLlpJbmRleEJlaGF2aW9yID0gRW51bS5aSW5kZXhCZWhhdmlvci5TaWJsaW5nCnNjcmVlbkd1aS5FbmFibGVkID0gZmFsc2UKCmxvY2FsIGNvbnRhaW5lciA9IEluc3RhbmNlLm5ldygiRnJhbWUiLCBzY3JlZW5HdWkpCmNvbnRhaW5lci5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgODApCmNvbnRhaW5lci5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIC0xMDAsIDAuNSwgLTQwKQpjb250YWluZXIuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKY29udGFpbmVyLkFjdGl2ZSA9IHRydWUKY29udGFpbmVyLkRyYWdnYWJsZSA9IHRydWUKCmxvY2FsIGJ5TGVubnlMYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgY29udGFpbmVyKQpieUxlbm55TGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygwLCAxNTAsIDAsIDI1KQpieUxlbm55TGFiZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAtNzUsIDAsIDApCmJ5TGVubnlMYWJlbC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAsIDIwLCAyMCkKYnlMZW5ueUxhYmVsLlRleHQgPSAiUmlzZSIKYnlMZW5ueUxhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQpieUxlbm55TGFiZWwuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkCmJ5TGVubnlMYWJlbC5UZXh0U2l6ZSA9IDEyCmJ5TGVubnlMYWJlbC5aSW5kZXggPSAyCgpsb2NhbCBsYWJlbENvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiLCBieUxlbm55TGFiZWwpCmxhYmVsQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDYpCgpsb2NhbCB0b2dnbGVCdXR0b24gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iLCBjb250YWluZXIpCnRvZ2dsZUJ1dHRvbi5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDUwKQp0b2dnbGVCdXR0b24uUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMCwgMzApCnRvZ2dsZUJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMzAsIDMwLCAzMCkKdG9nZ2xlQnV0dG9uLlRleHQgPSAiU3RhdHVzOiBPRkYiCnRvZ2dsZUJ1dHRvbi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCA1MCwgNTApCnRvZ2dsZUJ1dHRvbi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJsYWNrCnRvZ2dsZUJ1dHRvbi5UZXh0U2l6ZSA9IDE2CnRvZ2dsZUJ1dHRvbi5aSW5kZXggPSAyCgpsb2NhbCBidXR0b25Db3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIiwgdG9nZ2xlQnV0dG9uKQpidXR0b25Db3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgNikKCnRvZ2dsZUJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKCXNwYW1taW5nID0gbm90IHNwYW1taW5nCglpZiBzcGFtbWluZyB0aGVuCgkJdG9nZ2xlQnV0dG9uLlRleHQgPSAiU3RhdHVzOiBPTiIKCQl0b2dnbGVCdXR0b24uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDUwLCAyNTUsIDUwKQoJCW1hbnVhbFNwYW1FbmFibGVkID0gdHJ1ZQoJZWxzZQoJCXRvZ2dsZUJ1dHRvbi5UZXh0ID0gIlN0YXR1czogT0ZGIgoJCXRvZ2dsZUJ1dHRvbi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCA1MCwgNTApCgkJbWFudWFsU3BhbUVuYWJsZWQgPSBmYWxzZQoJZW5kCmVuZCkKClJ1blNlcnZpY2UuSGVhcnRiZWF0OkNvbm5lY3QoZnVuY3Rpb24oKQoJaWYgc3BhbW1pbmcgYW5kIG1hbnVhbFNwYW1FbmFibGVkIHRoZW4KCQlpZiB0aWNrKCkgLSBsYXN0UGFycnlUaW1lIDwgcGFycnlDb29sZG93biB0aGVuIHJldHVybiBlbmQKCQlsYXN0UGFycnlUaW1lID0gdGljaygpCgkJaWYgYWN0aXZlTWV0aG9kID09ICJGIEtleSIgdGhlbgoJCQlWaXJ0dWFsSW5wdXQ6U2VuZEtleUV2ZW50KHRydWUsIEVudW0uS2V5Q29kZS5GLCBmYWxzZSwgZ2FtZSkKCQkJVmlydHVhbElucHV0OlNlbmRLZXlFdmVudChmYWxzZSwgRW51bS5LZXlDb2RlLkYsIGZhbHNlLCBnYW1lKQoJCWVsc2UKCQkJbG9jYWwgUGFycnlfRGF0YSA9IEF1dG9QYXJyeS5jb21wdXRlUGFycnlEYXRhKHNlbGVjdGVkUGFycnlNb2RlKQoJCQlmb3IgUmVtb3RlLCBBcmdzIGluIHBhaXJzKFJlbW90ZXMpIGRvCgkJCQlSZW1vdGU6RmlyZVNlcnZlcihBcmdzLCBQYXJyeV9LZXksIFBhcnJ5X0RhdGFbMV0sIFBhcnJ5X0RhdGFbMl0sIFBhcnJ5X0RhdGFbM10sIFBhcnJ5X0RhdGFbNF0pCgkJCWVuZAoJCWVuZAoJCXRhc2sud2FpdChzcGFtUmF0ZSkKCWVuZAplbmQpCgotLSBBdXRvIFBhcnJ5IEZvbmtrb251CmxvY2FsIGZ1bmN0aW9uIHN0YXJ0QXV0b1BhcnJ5KCkKCWNvbm5NYW5hZ2VyWyJBdXRvIFBhcnJ5Il0gPSBSdW5TZXJ2aWNlLlByZVNpbXVsYXRpb246Q29ubmVjdChmdW5jdGlvbigpCgkJbG9jYWwgYmFsbCA9IEF1dG9QYXJyeS5HZXRfQmFsbCgpCgkJbG9jYWwgYmFsbExpc3QgPSBBdXRvUGFycnkuZmV0Y2hCYWxscygpCgkJZm9yIF8sIGIgaW4gaXBhaXJzKGJhbGxMaXN0KSBkbwoJCQlpZiBub3QgYiB0aGVuIHJlcGVhdCB0YXNrLndhaXQoKSB1bnRpbCBiIGVuZAoJCQlsb2NhbCB6b29tID0gYjpGaW5kRmlyc3RDaGlsZCgiem9vbWllcyIpCgkJCWlmIG5vdCB6b29tIHRoZW4gcmV0dXJuIGVuZAoJCQliOkdldEF0dHJpYnV0ZUNoYW5nZWRTaWduYWwoInRhcmdldCIpOk9uY2UoZnVuY3Rpb24oKSBwYXJyeUZsYWcgPSBmYWxzZSBlbmQpCgkJCWlmIHBhcnJ5RmxhZyB0aGVuIHJldHVybiBlbmQKCQkJbG9jYWwgYmFsbFRhcmdldCA9IGI6R2V0QXR0cmlidXRlKCJ0YXJnZXQiKQoJCQlsb2NhbCBwcmltYXJ5VGFyZ2V0ID0gYmFsbCBhbmQgYmFsbDpHZXRBdHRyaWJ1dGUoInRhcmdldCIpCgkJCWxvY2FsIHZlbCA9IHpvb20uVmVjdG9yVmVsb2NpdHkKCQkJbG9jYWwgZGlzdCA9IChMb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuUG9zaXRpb24gLSBiLlBvc2l0aW9uKS5NYWduaXR1ZGUKCQkJbG9jYWwgc3BkID0gdmVsLk1hZ25pdHVkZQoJCQlsb2NhbCBwaW5nID0gU3RhdHMuTmV0d29yay5TZXJ2ZXJTdGF0c0l0ZW1bIkRhdGEgUGluZyJdOkdldFZhbHVlKCkgLyAxMDAwCgkJCWxvY2FsIGFjY3VyYWN5RmFjdG9yID0gMSArIChhdXRvUGFycnlBY2N1cmFjeSAtIDUwKSAvIDEwMAoJCQlsb2NhbCBwYXJyeVRocmVzaCA9IEZ1bGxBY2N1cmFjeUVuYWJsZWQgYW5kIChzcGQgLyA0LjUgKyBwaW5nICogc3BkICogMC41KSBvciAoc3BkIC8gMy43NSArIHBpbmcgKiBzcGQgKiAxLjApCgkJCXBhcnJ5VGhyZXNoID0gcGFycnlUaHJlc2ggKiBhY2N1cmFjeUZhY3RvcgoJCQlsb2NhbCBjdXJ2ZWQgPSBBdXRvUGFycnkuZGV0ZWN0Q3VydmUoKQoKCQkJaWYgYmFsbFRhcmdldCA9PSB0b3N0cmluZyhMb2NhbFBsYXllcikgYW5kIGdldGdlbnYoKS5BZXJvZHluYW1pY0FjdGl2ZSB0aGVuCgkJCQlpZiB0aWNrKCkgLSAoZ2V0Z2VudigpLkFlcm9keW5hbWljVGltZSBvciAwKSA+PSAwLjYgdGhlbgoJCQkJCWdldGdlbnYoKS5BZXJvZHluYW1pY0FjdGl2ZSA9IGZhbHNlCgkJCQllbmQKCQkJCXJldHVybgoJCQllbmQKCQkJaWYgcHJpbWFyeVRhcmdldCA9PSB0b3N0cmluZyhMb2NhbFBsYXllcikgYW5kIGN1cnZlZCB0aGVuIAoJCQkJcmV0dXJuIAoJCQllbmQKCQkJaWYgYmFsbFRhcmdldCA9PSB0b3N0cmluZyhMb2NhbFBsYXllcikgYW5kIGRpc3QgPD0gcGFycnlUaHJlc2ggdGhlbgoJCQkJQXV0b1BhcnJ5LnBsYXlQYXJyeUFuaW1hdGlvbigpCgkJCQlBdXRvUGFycnkudHJpZ2dlclBhcnJ5KHNlbGVjdGVkUGFycnlNb2RlKQoJCQkJcGFycnlGbGFnID0gdHJ1ZQoJCQllbmQKCQkJbG9jYWwgbGFzdEN5Y2xlID0gdGljaygpCgkJCXJlcGVhdCAKCQkJCVJ1blNlcnZpY2UuUHJlU2ltdWxhdGlvbjpXYWl0KCkgCgkJCXVudGlsICh0aWNrKCkgLSBsYXN0Q3ljbGUpID49IDAuOCBvciBub3QgcGFycnlGbGFnCgkJCXBhcnJ5RmxhZyA9IGZhbHNlCgkJZW5kCgllbmQpCmVuZAoKdGFiMjpUb2dnbGUoIkF1dG8gUGFycnkiLCB0cnVlLCBmdW5jdGlvbih2YWx1ZSkKCWlmIHZhbHVlIHRoZW4KCQlwcmludCgiQWt0aXZlIGVkaWxkaSEiKQoJCXN0YXJ0QXV0b1BhcnJ5KCkKCWVsc2UKCQlwcmludCgiRGVha3RpdmUgZWRpbGRpISIpCgkJaWYgY29ubk1hbmFnZXJbIkF1dG8gUGFycnkiXSB0aGVuCgkJCWNvbm5NYW5hZ2VyWyJBdXRvIFBhcnJ5Il06RGlzY29ubmVjdCgpCgkJCWNvbm5NYW5hZ2VyWyJBdXRvIFBhcnJ5Il0gPSBuaWwKCQllbmQKCWVuZAplbmQpCgoKbG9jYWwgYXV0b1NwYW1Db3JvdXRpbmUgPSBuaWwKCmxvY2FsIGZ1bmN0aW9uIHN0YXJ0QXV0b1NwYW0oKQoJaWYgYXV0b1NwYW1Db3JvdXRpbmUgdGhlbgoJCWNvcm91dGluZS5jbG9zZShhdXRvU3BhbUNvcm91dGluZSkKCQlhdXRvU3BhbUNvcm91dGluZSA9IG5pbAoJCVNwYW1taW5nID0gZmFsc2UKCWVuZAoKCWF1dG9TcGFtQ29yb3V0aW5lID0gY29yb3V0aW5lLmNyZWF0ZShmdW5jdGlvbigpCgkJd2hpbGUgdHJ1ZSBkbwoJCQlsb2NhbCBCYWxsID0gU3BhbS5GZXRjaEJhbGwoKQoJCQlpZiBub3QgQmFsbCBvciBub3QgQmFsbDpGaW5kRmlyc3RDaGlsZCgiem9vbWllcyIpIHRoZW4KCQkJCVNwYW1taW5nID0gZmFsc2UKCQkJCXRhc2sud2FpdCgwLjEpCgkJCQljb250aW51ZQoJCQllbmQKCgkJCWxvY2FsIENoYXIgPSBMb2NhbFBsYXllci5DaGFyYWN0ZXIKCQkJbG9jYWwgSFJQID0gQ2hhciBhbmQgQ2hhci5QcmltYXJ5UGFydAoJCQlpZiBub3QgSFJQIHRoZW4KCQkJCVNwYW1taW5nID0gZmFsc2UKCQkJCXRhc2sud2FpdCgwLjEpCgkJCQljb250aW51ZQoJCQllbmQKCgkJCWxvY2FsIHBpbmcgPSBTZXJ2ZXJTdGF0c0l0ZW1bIkRhdGEgUGluZyJdOkdldFZhbHVlKCkgLyA4CgkJCWxvY2FsIGJhbGxQcm9wcyA9IFNwYW0uQmFsbF9Qcm9wZXJ0aWVzKCkKCQkJbG9jYWwgZW50aXR5UHJvcHMgPSBTcGFtLkVudGl0eV9Qcm9wZXJ0aWVzKCkKCQkJbG9jYWwgYWNjID0gU3BhbS5DYWxjQWNjdXJhY3koewoJCQkJQmFsbFByb3BzID0gYmFsbFByb3BzLAoJCQkJRW50aXR5UHJvcHMgPSBlbnRpdHlQcm9wcywKCQkJCVBpbmcgPSBwaW5nCgkJCX0pCgoJCQlTcGFtbWluZyA9IGVudGl0eVByb3BzLkRpc3RhbmNlIDw9IGFjYyAqIDAuOTggYW5kIGJhbGxQcm9wcy5EaXN0YW5jZSAqIDAuOTggPD0gYWNjIGFuZCBQYXJyaWVzID4gMQoKCQkJaWYgU3BhbW1pbmcgdGhlbgoJCQkJZm9yIF8gPSAxLCBzcGFtU3BlZWQgZG8KCQkJCQl0YXNrLnNwYXduKGZ1bmN0aW9uKCkKCQkJCQkJQXV0b1BhcnJ5LlBhcnJ5KGZhbHNlKQoJCQkJCWVuZCkKCQkJCWVuZAoJCQllbmQKCgkJCXRhc2sud2FpdCgwLjEpCgkJZW5kCgllbmQpCgoJY29yb3V0aW5lLnJlc3VtZShhdXRvU3BhbUNvcm91dGluZSkKZW5kCgotLSBUb2dnbGUgYmHEn2xhbnTEsXPEsSAodGFiMikKdGFiMjpUb2dnbGUoIkF1dG8gU3BhbSIsIHRydWUsIGZ1bmN0aW9uKHZhbHVlKQoJaWYgdmFsdWUgPT0gdHJ1ZSB0aGVuCgkJcHJpbnQoIkFrdGl2ZSBlZGlsZGkhIikKCQlzb21ldEF1dG9TcGFtKCkKCWVsc2UKCQlwcmludCgiRGVha3RpdmUgZWRpbGRpISIpCgkJaWYgYXV0b1NwYW1Db3JvdXRpbmUgdGhlbgoJCQljb3JvdXRpbmUuY2xvc2UoYXV0b1NwYW1Db3JvdXRpbmUpCgkJCWF1dG9TcGFtQ29yb3V0aW5lID0gbmlsCgkJZW5kCgkJaWYgY29ubk1hbmFnZXJbIkF1dG8gU3BhbSJdIHRoZW4KCQkJY29ubk1hbmFnZXJbIkF1dG8gU3BhbSJdOkRpc2Nvbm5lY3QoKQoJCQljb25uTWFuYWdlclsiQXV0byBTcGFtIl0gPSBuaWwKCQllbmQKCQlTcGFtbWluZyA9IGZhbHNlCgllbmQKZW5kKQoKCnRhYjI6VG9nZ2xlKCJNYW51YWwgU3BhbSIsIGZhbHNlLCBmdW5jdGlvbih2YWx1ZSkgLS0gZmFsc2UgeWEgZGEgdHJ1ZSBrZXNpbmxpa2xlIGJlbGlydGlsbWVsaQoJaWYgdmFsdWUgPT0gdHJ1ZSB0aGVuCgkJcHJpbnQoIkFrdGl2ZSBlZGlsZGkhIikKCQltYW51YWxTcGFtRW5hYmxlZCA9IHRydWUKCQlzY3JlZW5HdWkuRW5hYmxlZCA9IHRydWUKCWVsc2UKCQlwcmludCgiRGVha3RpdmUgZWRpbGRpISIpCgkJbWFudWFsU3BhbUVuYWJsZWQgPSBmYWxzZQoJCXNjcmVlbkd1aS5FbmFibGVkID0gZmFsc2UKCWVuZAplbmQpCgotLSBTbGlkZXIgT2x1xZ90dXJtYQpsb2NhbCBzbGlkZXIgPSB0YWIyOlNsaWRlcigiU3BhbSBUaHJlc2hvbGQiLCAxLCAxMDAsIGZ1bmN0aW9uKHZhbHVlKQoJLS0gMeKAkzEwMCBhcmFzxLEgZ2VsZW4gZGXEn2VyaSBvcmlqaW5hbCBhcmFsxLFrIG9sYW4gMC4wMDHigJMwLjEnZSDDp2V2aXJpeW9ydXoKCWxvY2FsIHNjYWxlZFZhbHVlID0gbWF0aC5mbG9vcigodmFsdWUgLyAxMDApICogKDAuMSAtIDAuMDAxKSAvIDAuMDAxICsgMC41KSAqIDAuMDAxICsgMC4wMDEKCXNwYW1UaHJlc2hvbGQgPSBzY2FsZWRWYWx1ZQoJcHJpbnQoIlNwYW0gVGhyZXNob2xkIFNldCBUbzogIiwgc3BhbVRocmVzaG9sZCkKZW5kKQoKc2xpZGVyOlNldFZhbHVlKDQpIC0tIDQg4oaSIHlha2xhxZ/EsWsgMC4wMDUKCmxvY2FsIG5ld3NlYyA9IHRhYjI6U2VjdGlvbigiQXV0byBQYXJyeSBTZXR0aW5ncyIpCi0tIFBhcnJ5IE1vZGUgbGlzdGVzaQpsb2NhbCBwYXJyeU1vZGVzID0geyJDdXN0b20iLCAiUmFuZG9tIiwgIlN0cmFpZ2h0IiwgIlVwIiwgIkJhY2t3YXJkcyIsICJSaWdodCIsICJMZWZ0IiwgIkRvdCJ9Ci0tIERyb3Bkb3duIE9sdcWfdHVybWEgKGJhxZ9sYW5nxLHDpyBkZcSfZXJpIG9sYXJhayAiUmFuZG9tIiB2ZXJpeW9ydXopCmxvY2FsIGRyb3Bkb3duID0gdGFiMjpEcm9wZG93bigiUGFycnkgTW9kZSIsIHsiUmFuZG9tIn0sIGZ1bmN0aW9uKHNlbGVjdGVkKQoJc2VsZWN0ZWRQYXJyeU1vZGUgPSBzZWxlY3RlZAoJcHJpbnQoIlBhcnJ5IE1vZGUgc2VsZWN0ZWQ6Iiwgc2VsZWN0ZWQpCmVuZCkKLVQgRHJvcGRvd24ndSB0ZW1pemxlCmRyb3Bkb3duOkNsZWFyKCkKLVQgVMO8bSBzZcOnZW5la2xlcmkgZWtsZQpmb3IgXywgbW9kZSBpbiBpcGFpcnMocGFycnlNb2RlcykgZG8KCWlkcm9wZG93bjpBZGQobW9kZSwgZnVuY3Rpb24oKQoJCXNlbGVjdGVkUGFycnlNb2RlID0gbW9kZQoJCXByaW50KCJQYXJyeSBNb2RlIGNoYW5nZWQgdG86IiwgbW9kZSkKCWVuZCkKZW5kCi0tIEJhxZ9sYW5nxLHDpyBkZcSfZXJpIG9sYXJhayBSYW5kb20gc2XDpwpyZWxlY3RlZFBhcnJ5TW9kZSA9ICJSYW5kb20iCgpsb2NhbCB0YWIzID0gV2luZG93OlRhYigiU2V0dGluZ3MgUGFycnkiKSAKbG9jYWwgbGFiZWwgPSB0YWIzOkxhYmVsKCJTZXR0aW5ncyIsIldvYWhoIE9QISEhMTExIikKCmxvY2FsIG5ld3NlYyA9IHRhYjM6U2VjdGlvbigiQXV0byBQYXJyeSAmIFNwYW0gU2V0dGluZ3MiKQoKdGFiMzpUb2dnbGUoIkZ1bGwgQWNjdXJhY3kiLCBmYWxzZSwgZnVuY3Rpb24odmFsdWUpIC0tIGZhbHNlIHlhIGRhIHRydWUga2VzaW5saWtsZSBiZWxpcnRpbG1lbGkKCUZ1bGxBY2N1cmFjeUVuYWJsZWQgPSB2YWx1ZQoKCWlmIHZhbHVlID09IHRydWUgdGhlbgoJCXByaW50KCJBa3RpdmUgZWRpbGRpISIpCgllbHNlCgkJcHJpbnQoIkRlYWt0aXZlIGVkaWxkaSEiKQoJZW5kCmVuZCkKCi0tIFNsaWRlciBPbHXFn3R1cm1hICgxMOKAkzEwMCDihpIgMC4x4oCTMS4wIGFyYWzEscSfxLFuYSBkw7bww6dlcmlyaW5pcikKbG9jYWwgc2xpZGVyID0gbmV3c2VjOlNsaWRlcigiU3BhbSBUaHJlc2hvbGQiLCAxMCwgMTAwLCBmdW5jdGlvbih2YWx1ZSkKCXNwYW1UaHJlc2hvbGQgPSB2YWx1ZSAvIDEwMCAtLSAxMCDihpIgMC4xLCAxMDAg4oaSIDEuMAoJcHJpbnQoIlNwYW0gVGhyZXNob2xkOiIsIHNwYW1UaHJlc2hvbGQpCmVuZCkKCi0tIE1ldmN1dCBkZcSfZXJpIGFsbWEgKMO2cm5lxJ9pbiAwLjHigJMxLjAgYXJhbMSxxJ/EsW5kYSkKcHJpbnQoc2xpZGVyOkdldFZhbHVlKCkgLyAxMDApCi0tIEJhxZ9sYW5nxLHDpyBkZcSfZXJpIDEuMCB5YXBpbiAxMDAgdmVyaXlvcnV6CnNsaWRlcjpTZXRWYWx1ZSgxMDApCi0tIFNsaWRlciBPbHXFn3R1cm1hICgx4oCTMzAgYXJhbMSxxJ/EsW5hIGRvbsO8xZ90w7xyw7xtw7zFnykKbG9jYWwgc2xpZGVyID0gdGFiMzpTbGlkZXIoIlNwYW0gU3BlZWQiLCAxLCAzMCwgZnVuY3Rpb24odmFsdWUpCglzcGFtU3BlZWQgPSB2YWx1ZQoJcHJpbnQoIlNwYW0gU3BlZWQ6IiwgdmFsdWUpCmVuZCkKCi0tIFNsaWRlcuKAmWluIGRlxJ9lcmluaSBhbG1hCnByaW50KHNsaWRlcjpHZXRWYWx1ZSgpKQoKLS0gU2xpZGVy4oCZYSBiYcWfbGFuZ8Sxw6cgZGXEn2VyaSBrb3ltYSAoMTUgZGVmYXVsdCBpc2UpCnNsaWRlcjpTZXRWYWx1ZSgxNSkKCnRhYjM6VG9nZ2xlKCJGT1YgTW9kaWZpZXIiLCBmYWxzZSwgZnVuY3Rpb24odmFsdWUpIC0tIGZhbHNlIHlhIGRhIHRydWUga2VzaW5saWtsZSBiZWxpcnRpbG1lbGkKCUNhbWVyYUZPVkVuYWJsZWQgPSB2YWx1ZQoKCWlmIHZhbHVlID09IHRydWUgdGhlbgoJCXByaW50KCJBa3RpdmUgZWRpbGRpISIpCgkJV29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuRmllbGRPZlZpZXcgPSBDYW1lcmFGT1YKCWVsc2UKCQlwcmludCgiRGVha3RpdmUgZWRpbGRpISIpCgkJV29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuRmllbGRPZlZpZXcgPSA3MAoJZW5kCmVuZCkKCgpsb2NhbCBmdW5jdGlvbiBzY2FsZVZhbHVlKHZhbHVlLCBpbk1pbiwgaW5NYXgsIG91dE1pbiwgb3V0TWF4KQoJcmV0dXJuICh2YWx1ZSAtIGluTWluKSAqIChvdXRNYXggLSBvdXRNaW4pIC8gKGluTWF4IC0gaW5NaW4pICsgb3V0TWluCmVuZAoKbG9jYWwgc2xpZGVyID0gdGFiMzpTbGlkZXIoIkZPViBWYWx1ZSIsIDE2LCAxMDAsIGZ1bmN0aW9uKHZhbHVlKQoJLS0gc2xpZGVyIGRlxJ9lcmkgMTYtMTAwIGFyYXPEsSwgYnVudSAzMC0xMjAgYXJhbMSxxJ/EsW5hIMOnZXZpcml5b3J1egoJQ2FtZXJhRk9WID0gc2NhbGVWYWx1ZSh2YWx1ZSwgMTYsIDEwMCwgMzAsIDEyMCkKCUNhbWVyYUZPViA9IG1hdGguZmxvb3IoQ2FtZXJhRk9WKSAtLSBpc3RlxJ9lIGJhxJ9sxLEgdGFtIHNhecSxIHlhcGFiaWxpcml6CglwcmludCgiQ2FtZXJhIEZPVjoiLCBDYW1lcmFGT1YpCgoJaWYgQ2FtZXJhRk9WRW5hYmxlZCB0aGVuCgkJV29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuRmllbGRPZlZpZXcgPSBDYW1lcmFGT1YKCWVuZAplbmQpCi0tIFZhcnNhecSxIGxhbiBkZcSfZXIgNzAgacOnaW4gMTYtMTAwIGFyYWzEscSfxLFuZGEgaGFuZ2kgZGXEn2VyZSBkZW5rIGdlbGl5b3IgaGVzYXBsYXlhbMSxbToKbG9jYWwgZGVmYXVsdFNsaWRlclZhbHVlID0gbWF0aC5mbG9vcigoNzAgLSAzMCkgKiAoMTAwIC0gMTYpIC8gKDEyMCAtIDMwKSArIDE2KQpzbGlkZXI6U2V0VmFsdWUoZGVmYXVsdFNsaWRlclZhbHVlKQoKLS0gU2xpZGVyxLFuIGRlxJ9lcmluaSBhbG1hIMO2cm5lxJ9pCnByaW50KHNsaWRlcjpHZXRWYWx1ZSgpKQoKCnRhYjM6VG9nZ2xlKCJBbnRpLUxhZyIsIGZhbHNlLCBmdW5jdGlvbih2YWx1ZSkgLS0gZmFsc2UgeWEgZGEgdHJ1ZSBrZXNpbmxpa2xlIGJlbGlydGlsbWVsaQoJQW50aUxhZ0VuYWJsZWQgPSB2YWx1ZQoKCWlmIHZhbHVlID09IHRydWUgdGhlbgoJCXByaW50KCJBa3RpdmUgZWRpbGRpISIpCgkJYXBwbHlBbnRpTGFnKHRydWUpCgllbHNlCgkJcHJpbnQoIkRlYWt0aXZlIGVkaWxkaSEiKQoJCWFwcGx5QW50aUxhZyhmYWxzZSkKCWVuZAplbmQpCgp0YXNrLnNwYXduKGZ1bmN0aW9uKCkKCXRhc2sud2FpdCgxKQoJaWYgY29ubk1hbmFnZXJbIkF1dG8gUGFycnkiXSA9PSBuaWwgdGhlbgoJCWNvbm5NYW5hZ2VyWyJBdXRvIFBhcnJ5Il0gPSBSdW5TZXJ2aWNlLlByZVNpbXVsYXRpb246Q29ubmVjdChmdW5jdGlvbigpCgkJCWxvY2FsIGJhbGwgPSBBdXRvUGFycnkuR2V0X0JhbGwoKQoJCQlsb2NhbCBiYWxsTGlzdCA9IEF1dG9QYXJyeS5mZXRjaEJhbGxzKCkKCQkJZm9yIF8sIGIgaW4gaXBhaXJzKGJhbGxMaXN0KSBkbwoJCQkJaWYgbm90IGIgdGhlbiByZXBlYXQgdGFzay53YWl0KCkgdW50aWwgYiBlbmQKCQkJCWxvY2FsIHpvb20gPSBiOkZpbmRGaXJzdENoaWxkKCJ6b29taWVzIikKCQkJCWlmIG5vdCB6b29tIHRoZW4gcmV0dXJuIGVuZAoJCQkJYjpHZXRBdHRyaWJ1dGVDaGFuZ2VkU2lnbmFsKCJ0YXJnZXQiKTpPbmNlKGZ1bmN0aW9uKCkgcGFycnlGbGFnID0gZmFsc2UgZW5kKQoJCQkJaWYgcGFycnlGbGFnIHRoZW4gcmV0dXJuIGVuZAoJCQkJbG9jYWwgYmFsbFRhcmdldCA9IGI6R2V0QXR0cmlidXRlKCJ0YXJnZXQiKQoJCQkJbG9jYWwgcHJpbWFyeVRhcmdldCA9IGJhbGwgYW5kIGJhbGw6R2V0QXR0cmlidXRlKCJ0YXJnZXQiKQoJCQkJbG9jYWwgdmVsID0gem9vbS5WZWN0b3JWZWxvY2l0eQoJCQkJbG9jYWwgZGlzdCA9IChMb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuUG9zaXRpb24gLSBiLlBvc2l0aW9uKS5NYWduaXR1ZGUKCQkJCWxvY2FsIHNwZCA9IHZlbC5NYWduaXR1ZGUKCQkJCWxvY2FsIHBpbmcgPSBTdGF0cy5OZXR3b3JrLlNlcnZlclN0YXRzSXRlbVsiRGF0YSBQaW5nIl06R2V0VmFsdWUoKSAvIDEwMDAKCQkJCWxvY2FsIGFjY3VyYWN5RmFjdG9yID0gMSArIChhdXRvUGFycnlBY2N1cmFjeSAtIDUwKSAvIDEwMAoJCQkJbG9jYWwgcGFycnlUaHJlc2ggPSBGdWxsQWNjdXJhY3lFbmFibGVkIGFuZCAoc3BkIC8gNC41ICsgcGluZyAqIHNwZCAqIDAuNSkgb3IgKHNwZCAvIDMuNzUgKyBwaW5nICogc3BkICogMS4wKQoJCQkJcGFycnlUaHJlc2ggPSBwYXJyeVRocmVzaCAqIGFjY3VyYWN5RmFjdG9yCgkJCQlsb2NhbCBjdXJ2ZWQgPSBBdXRvUGFycnkuZGV0ZWN0Q3VydmUoKQoJCQkJaWYgYmFsbFRhcmdldCA9PSB0b3N0cmluZyhMb2NhbFBsYXllcikgYW5kIGdldGdlbnYoKS5BZXJvZHluYW1pY0FjdGl2ZSB0aGVuCgkJCQkJaWYgdGljaygpIC0gKGdldGdlbnYoKS5BZXJvZHluYW1pY1RpbWUgb3IgMCkgPj0gMC42IHRoZW4KCQkJCQkJZ2V0Z2VudigpLkFlcm9keW5hbWljQWN0aXZlID0gZmFsc2UKCQkJCQllbmQKCQkJCQlyZXR1cm4KCQkJCWVuZAoJCQkJaWYgcHJpbWFyeVRhcmdldCA9PSB0b3N0cmluZyhMb2NhbFBsYXllcikgYW5kIGN1cnZlZCB0aGVuIAoJCQkJCXJldHVybiAKCQkJCWVuZAoJCQkJaWYgYmFsbFRhcmdldCA9PSB0b3N0cmluZyhMb2NhbFBsYXllcikgYW5kIGRpc3QgPD0gcGFycnlUaHJlc2ggdGhlbgoJCQkJCUF1dG9QYXJyeS5wbGF5UGFycnlBbmltYXRpb24oKQoJCQkJCUF1dG9QYXJyeS50cmlnZ2VyUGFycnkoc2VsZWN0ZWRQYXJyeU1vZGUpCgkJCQkJcGFycnlGbGFnID0gdHJ1ZQoJCQkJZW5kCgkJCQlsb2NhbCBsYXN0Q3ljbGUgPSB0aWNrKCkKCQkJCXJlcGVhdCAKCQkJCQlSdW5TZXJ2aWNlLlByZVNpbXVsYXRpb246V2FpdCgpIAoJCQkJdW50aWwgKHRpY2soKSAtIGxhc3RDeWNsZSkgPj0gMC44IG9yIG5vdCBwYXJyeUZsYWcKCQkJCXBhcnJ5RmxhZyA9IGZhbHNlCgkJCWVuZAoJCWVuZCkKCWVuZAoJaWYgY29ubk1hbmFnZXJbIkF1dG8gU3BhbSJdID09IG5pbCB0aGVuCgkJY29ubk1hbmFnZXJbIkF1dG8gU3BhbSJdID0gUnVuU2VydmljZS5IZWFydGJlYXQ6Q29ubmVjdChmdW5jdGlvbigpCgkJCWxvY2FsIEJhbGwgPSBTcGFtLkZldGNoQmFsbCgpCgkJCWlmIG5vdCBCYWxsIG9yIG5vdCBCYWxsOkZpbmRGaXJzdENoaWxkKCJ6b29taWVzIikgdGhlbgoJCQkJU3BhbW1pbmcgPSBmYWxzZQoJCQkJcmV0dXJuCgkJCWVuZAoJCQlsb2NhbCBDaGFyID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCgkJCWxvY2FsIEhSUCA9IENoYXIgYW5kIENoYXIuUHJpbWFyeVBhcnQKCQkJaWYgbm90IEhSUCB0aGVuCgkJCQlTcGFtbWluZyA9IGZhbHNlCgkJCQlyZXR1cm4KCQkJZW5kCgkJCWxvY2FsIHBpbmcgPSBTZXJ2ZXJTdGF0c0l0ZW1bIkRhdGEgUGluZyJdOkdldFZhbHVlKCkgLyA4CgkJCWxvY2FsIGJhbGxQcm9wcyA9IFNwYW0uQmFsbF9Qcm9wZXJ0aWVzKCkKCQkJbG9jYWwgZW50aXR5UHJvcHMgPSBTcGFtLkVudGl0eV9Qcm9wZXJ0aWVzKCkKCQkJbG9jYWwgYWNjID0gU3BhbS5DYWxjQWNjdXJhY3koewoJCQkJQmFsbFByb3BzID0gYmFsbFByb3BzLAoJCQkJRW50aXR5UHJvcHMgPSBlbnRpdHlQcm9wcywKCQkJCVBpbmcgPSBwaW5nCgkJCX0pCgkJCVNwYW1taW5nID0gZW50aXR5UHJvcHMuRGlzdGFuY2UgPD0gYWNjICogMC45OCBhbmQgYmFsbFByb3BzLkRpc3RhbmNlICogMC45OCA8PSBhY2MgYW5kIFBhcnJpZXMgPiAxCgkJCWlmIFNwYW1taW5nIHRoZW4KCQkJCWZvciBfID0gMSwgc3BhbVNwZWVkIGRvCgkJCQkJdGFzay5zcGF3bihmdW5jdGlvbigpCgkJCQkJCUF1dG9QYXJyeS5QYXJyeShmYWxzZSkKCQkJCQllbmQpCgkJCQllbmQKCQkJZW5kCgkJZW5kKQoJZW5kCmVuZCk='))()
